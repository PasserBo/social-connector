{"ast":null,"code":"import _asyncToGenerator from\"/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/node_modules/@babel/runtime/regenerator/index.js\";// ** Redux Imports\nimport{createSlice,createAsyncThunk}from'@reduxjs/toolkit';// ** Axios Imports\nimport axios from'axios';export var getBookmarks=createAsyncThunk('layout/getBookmarks',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/bookmarks/data');case 2:response=_context.sent;return _context.abrupt(\"return\",{data:response.data.suggestions,bookmarks:response.data.bookmarks});case 4:case\"end\":return _context.stop();}}},_callee);})));export var updateBookmarked=createAsyncThunk('layout/updateBookmarked',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/api/bookmarks/update',{id:id});case 2:return _context2.abrupt(\"return\",id);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());export var layoutSlice=createSlice({name:'layout',initialState:{query:'',bookmarks:[],suggestions:[]},reducers:{handleSearchQuery:function handleSearchQuery(state,action){state.query=action.payload;}},extraReducers:function extraReducers(builder){builder.addCase(getBookmarks.fulfilled,function(state,action){state.suggestions=action.payload.data;state.bookmarks=action.payload.bookmarks;}).addCase(updateBookmarked.fulfilled,function(state,action){var objectToUpdate;// ** find & update object\nstate.suggestions.find(function(item){if(item.id===action.payload){item.isBookmarked=!item.isBookmarked;objectToUpdate=item;}});// ** Get index to add or remove bookmark from array\nvar bookmarkIndex=state.bookmarks.findIndex(function(x){return x.id===action.payload;});if(bookmarkIndex===-1){state.bookmarks.push(objectToUpdate);}else{state.bookmarks.splice(bookmarkIndex,1);}});}});var handleSearchQuery=layoutSlice.actions.handleSearchQuery;export{handleSearchQuery};export default layoutSlice.reducer;","map":{"version":3,"sources":["/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/src/redux/navbar.js"],"names":["createSlice","createAsyncThunk","axios","getBookmarks","get","response","data","suggestions","bookmarks","updateBookmarked","id","post","layoutSlice","name","initialState","query","reducers","handleSearchQuery","state","action","payload","extraReducers","builder","addCase","fulfilled","objectToUpdate","find","item","isBookmarked","bookmarkIndex","findIndex","x","push","splice","actions","reducer"],"mappings":"qVAAA;AACA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CAEA;AACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,IAAMC,CAAAA,YAAY,CAAGF,gBAAgB,CAAC,qBAAD,sEAAwB,sKAC3CC,CAAAA,KAAK,CAACE,GAAN,CAAU,qBAAV,CAD2C,QAC5DC,QAD4D,+CAE3D,CACLC,IAAI,CAAED,QAAQ,CAACC,IAAT,CAAcC,WADf,CAELC,SAAS,CAAEH,QAAQ,CAACC,IAAT,CAAcE,SAFpB,CAF2D,wDAAxB,GAArC,CAQP,MAAO,IAAMC,CAAAA,gBAAgB,CAAGR,gBAAgB,CAAC,yBAAD,2FAA4B,kBAAMS,EAAN,6IACpER,CAAAA,KAAK,CAACS,IAAN,CAAW,uBAAX,CAAoC,CAAED,EAAE,CAAFA,EAAF,CAApC,CADoE,yCAEnEA,EAFmE,0DAA5B,gEAAzC,CAKP,MAAO,IAAME,CAAAA,WAAW,CAAGZ,WAAW,CAAC,CACrCa,IAAI,CAAE,QAD+B,CAErCC,YAAY,CAAE,CACZC,KAAK,CAAE,EADK,CAEZP,SAAS,CAAE,EAFC,CAGZD,WAAW,CAAE,EAHD,CAFuB,CAOrCS,QAAQ,CAAE,CACRC,iBAAiB,CAAE,2BAACC,KAAD,CAAQC,MAAR,CAAmB,CACpCD,KAAK,CAACH,KAAN,CAAcI,MAAM,CAACC,OAArB,CACD,CAHO,CAP2B,CAYrCC,aAAa,CAAE,uBAAAC,OAAO,CAAI,CACxBA,OAAO,CACJC,OADH,CACWpB,YAAY,CAACqB,SADxB,CACmC,SAACN,KAAD,CAAQC,MAAR,CAAmB,CAClDD,KAAK,CAACX,WAAN,CAAoBY,MAAM,CAACC,OAAP,CAAed,IAAnC,CACAY,KAAK,CAACV,SAAN,CAAkBW,MAAM,CAACC,OAAP,CAAeZ,SAAjC,CACD,CAJH,EAKGe,OALH,CAKWd,gBAAgB,CAACe,SAL5B,CAKuC,SAACN,KAAD,CAAQC,MAAR,CAAmB,CACtD,GAAIM,CAAAA,cAAJ,CAEA;AACAP,KAAK,CAACX,WAAN,CAAkBmB,IAAlB,CAAuB,SAAAC,IAAI,CAAI,CAC7B,GAAIA,IAAI,CAACjB,EAAL,GAAYS,MAAM,CAACC,OAAvB,CAAgC,CAC9BO,IAAI,CAACC,YAAL,CAAoB,CAACD,IAAI,CAACC,YAA1B,CACAH,cAAc,CAAGE,IAAjB,CACD,CACF,CALD,EAOA;AACA,GAAME,CAAAA,aAAa,CAAGX,KAAK,CAACV,SAAN,CAAgBsB,SAAhB,CAA0B,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACrB,EAAF,GAASS,MAAM,CAACC,OAApB,EAA3B,CAAtB,CAEA,GAAIS,aAAa,GAAK,CAAC,CAAvB,CAA0B,CACxBX,KAAK,CAACV,SAAN,CAAgBwB,IAAhB,CAAqBP,cAArB,EACD,CAFD,IAEO,CACLP,KAAK,CAACV,SAAN,CAAgByB,MAAhB,CAAuBJ,aAAvB,CAAsC,CAAtC,EACD,CACF,CAxBH,EAyBD,CAtCoC,CAAD,CAA/B,CAyCA,GAAQZ,CAAAA,iBAAR,CAA8BL,WAAW,CAACsB,OAA1C,CAAQjB,iBAAR,C,0BAEP,cAAeL,CAAAA,WAAW,CAACuB,OAA3B","sourcesContent":["// ** Redux Imports\r\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\n// ** Axios Imports\r\nimport axios from 'axios'\r\n\r\nexport const getBookmarks = createAsyncThunk('layout/getBookmarks', async () => {\r\n  const response = await axios.get('/api/bookmarks/data')\r\n  return {\r\n    data: response.data.suggestions,\r\n    bookmarks: response.data.bookmarks\r\n  }\r\n})\r\n\r\nexport const updateBookmarked = createAsyncThunk('layout/updateBookmarked', async id => {\r\n  await axios.post('/api/bookmarks/update', { id })\r\n  return id\r\n})\r\n\r\nexport const layoutSlice = createSlice({\r\n  name: 'layout',\r\n  initialState: {\r\n    query: '',\r\n    bookmarks: [],\r\n    suggestions: []\r\n  },\r\n  reducers: {\r\n    handleSearchQuery: (state, action) => {\r\n      state.query = action.payload\r\n    }\r\n  },\r\n  extraReducers: builder => {\r\n    builder\r\n      .addCase(getBookmarks.fulfilled, (state, action) => {\r\n        state.suggestions = action.payload.data\r\n        state.bookmarks = action.payload.bookmarks\r\n      })\r\n      .addCase(updateBookmarked.fulfilled, (state, action) => {\r\n        let objectToUpdate\r\n\r\n        // ** find & update object\r\n        state.suggestions.find(item => {\r\n          if (item.id === action.payload) {\r\n            item.isBookmarked = !item.isBookmarked\r\n            objectToUpdate = item\r\n          }\r\n        })\r\n\r\n        // ** Get index to add or remove bookmark from array\r\n        const bookmarkIndex = state.bookmarks.findIndex(x => x.id === action.payload)\r\n\r\n        if (bookmarkIndex === -1) {\r\n          state.bookmarks.push(objectToUpdate)\r\n        } else {\r\n          state.bookmarks.splice(bookmarkIndex, 1)\r\n        }\r\n      })\r\n  }\r\n})\r\n\r\nexport const { handleSearchQuery } = layoutSlice.actions\r\n\r\nexport default layoutSlice.reducer\r\n"]},"metadata":{},"sourceType":"module"}