{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";// ** React Imports\nimport{useContext}from'react';import{AbilityContext}from'@src/utility/context/Can';/**\r\n * Return which component to render based on it's data/context\r\n * @param {Object} item nav menu item\r\n */export var resolveVerticalNavMenuItemComponent=function resolveVerticalNavMenuItemComponent(item){if(item.header)return'VerticalNavMenuSectionHeader';if(item.children)return'VerticalNavMenuGroup';return'VerticalNavMenuLink';};/**\r\n * Return which component to render based on it's data/context\r\n * @param {Object} item nav menu item\r\n */export var resolveHorizontalNavMenuItemComponent=function resolveHorizontalNavMenuItemComponent(item){if(item.children)return'HorizontalNavMenuGroup';return'HorizontalNavMenuLink';};/**\r\n * Check if nav-link is active\r\n * @param {Object} link nav-link object\r\n */export var isNavLinkActive=function isNavLinkActive(link,currentURL,routerProps){return currentURL===link||routerProps&&routerProps.meta&&routerProps.meta.navLink&&routerProps.meta.navLink===link;// return currentURL === link\n};/**\r\n * Check if the given item has the given url\r\n * in one of its children\r\n *\r\n * @param item\r\n * @param activeItem\r\n */export var hasActiveChild=function hasActiveChild(item,currentUrl){var children=item.children;if(!children){return false;}var _iterator=_createForOfIteratorHelper(children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;if(child.children){if(hasActiveChild(child,currentUrl)){return true;}}// Check if the child has a link and is active\nif(child&&child.navLink&&currentUrl&&(child.navLink===currentUrl||currentUrl.includes(child.navLink))){return true;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return false;};/**\r\n * Check if this is a children\r\n * of the given item\r\n *\r\n * @param children\r\n * @param openGroup\r\n * @param currentActiveGroup\r\n */export var removeChildren=function removeChildren(children,openGroup,currentActiveGroup){children.forEach(function(child){if(!currentActiveGroup.includes(child.id)){var index=openGroup.indexOf(child.id);if(index>-1)openGroup.splice(index,1);if(child.children)removeChildren(child.children,openGroup,currentActiveGroup);}});};export var canViewMenuGroup=function canViewMenuGroup(item){var ability=useContext(AbilityContext);// ! This same logic is used in canViewHorizontalNavMenuGroup and canViewHorizontalNavMenuHeaderGroup. So make sure to update logic in them as well\nvar hasAnyVisibleChild=item.children&&item.children.some(function(i){return ability.can(i.action,i.resource);});// ** If resource and action is defined in item => Return based on children visibility (Hide group if no child is visible)\n// ** Else check for ability using provided resource and action along with checking if has any visible child\nif(!(item.action&&item.resource)){return hasAnyVisibleChild;}return ability.can(item.action,item.resource)&&hasAnyVisibleChild;};export var canViewMenuItem=function canViewMenuItem(item){var ability=useContext(AbilityContext);return ability.can(item.action,item.resource);};","map":{"version":3,"sources":["/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/src/@core/layouts/utils.js"],"names":["useContext","AbilityContext","resolveVerticalNavMenuItemComponent","item","header","children","resolveHorizontalNavMenuItemComponent","isNavLinkActive","link","currentURL","routerProps","meta","navLink","hasActiveChild","currentUrl","child","includes","removeChildren","openGroup","currentActiveGroup","forEach","id","index","indexOf","splice","canViewMenuGroup","ability","hasAnyVisibleChild","some","i","can","action","resource","canViewMenuItem"],"mappings":"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","sourcesContent":["// ** React Imports\r\nimport { useContext } from 'react'\r\nimport { AbilityContext } from '@src/utility/context/Can'\r\n\r\n/**\r\n * Return which component to render based on it's data/context\r\n * @param {Object} item nav menu item\r\n */\r\nexport const resolveVerticalNavMenuItemComponent = item => {\r\n  if (item.header) return 'VerticalNavMenuSectionHeader'\r\n  if (item.children) return 'VerticalNavMenuGroup'\r\n  return 'VerticalNavMenuLink'\r\n}\r\n\r\n/**\r\n * Return which component to render based on it's data/context\r\n * @param {Object} item nav menu item\r\n */\r\nexport const resolveHorizontalNavMenuItemComponent = item => {\r\n  if (item.children) return 'HorizontalNavMenuGroup'\r\n  return 'HorizontalNavMenuLink'\r\n}\r\n\r\n/**\r\n * Check if nav-link is active\r\n * @param {Object} link nav-link object\r\n */\r\nexport const isNavLinkActive = (link, currentURL, routerProps) => {\r\n  return (\r\n    currentURL === link ||\r\n    (routerProps && routerProps.meta && routerProps.meta.navLink && routerProps.meta.navLink === link)\r\n  )\r\n  // return currentURL === link\r\n}\r\n\r\n/**\r\n * Check if the given item has the given url\r\n * in one of its children\r\n *\r\n * @param item\r\n * @param activeItem\r\n */\r\nexport const hasActiveChild = (item, currentUrl) => {\r\n  const { children } = item\r\n\r\n  if (!children) {\r\n    return false\r\n  }\r\n\r\n  for (const child of children) {\r\n    if (child.children) {\r\n      if (hasActiveChild(child, currentUrl)) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    // Check if the child has a link and is active\r\n    if (child && child.navLink && currentUrl && (child.navLink === currentUrl || currentUrl.includes(child.navLink))) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n/**\r\n * Check if this is a children\r\n * of the given item\r\n *\r\n * @param children\r\n * @param openGroup\r\n * @param currentActiveGroup\r\n */\r\nexport const removeChildren = (children, openGroup, currentActiveGroup) => {\r\n  children.forEach(child => {\r\n    if (!currentActiveGroup.includes(child.id)) {\r\n      const index = openGroup.indexOf(child.id)\r\n      if (index > -1) openGroup.splice(index, 1)\r\n      if (child.children) removeChildren(child.children, openGroup, currentActiveGroup)\r\n    }\r\n  })\r\n}\r\n\r\nexport const canViewMenuGroup = item => {\r\n  const ability = useContext(AbilityContext)\r\n  // ! This same logic is used in canViewHorizontalNavMenuGroup and canViewHorizontalNavMenuHeaderGroup. So make sure to update logic in them as well\r\n  const hasAnyVisibleChild = item.children && item.children.some(i => ability.can(i.action, i.resource))\r\n\r\n  // ** If resource and action is defined in item => Return based on children visibility (Hide group if no child is visible)\r\n  // ** Else check for ability using provided resource and action along with checking if has any visible child\r\n  if (!(item.action && item.resource)) {\r\n    return hasAnyVisibleChild\r\n  }\r\n  return ability.can(item.action, item.resource) && hasAnyVisibleChild\r\n}\r\n\r\nexport const canViewMenuItem = item => {\r\n  const ability = useContext(AbilityContext)\r\n  return ability.can(item.action, item.resource)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}