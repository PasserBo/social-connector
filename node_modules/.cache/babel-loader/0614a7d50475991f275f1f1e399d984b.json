{"ast":null,"code":"import { TransactionVersion, ChainID, fetchPrivate } from '@stacks/common';\nexport const HIRO_MAINNET_DEFAULT = 'https://stacks-node-api.mainnet.stacks.co';\nexport const HIRO_REGTEST_DEFAULT = 'https://stacks-node-api.regtest.stacks.co';\nexport const HIRO_TESTNET_DEFAULT = 'https://stacks-node-api.testnet.stacks.co';\nexport const HIRO_MOCKNET_DEFAULT = 'http://localhost:3999';\nexport class StacksMainnet {\n  constructor() {\n    let networkUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      url: HIRO_MAINNET_DEFAULT\n    };\n    this.version = TransactionVersion.Mainnet;\n    this.chainId = ChainID.Mainnet;\n    this.bnsLookupUrl = 'https://stacks-node-api.mainnet.stacks.co';\n    this.broadcastEndpoint = '/v2/transactions';\n    this.transferFeeEstimateEndpoint = '/v2/fees/transfer';\n    this.accountEndpoint = '/v2/accounts';\n    this.contractAbiEndpoint = '/v2/contracts/interface';\n    this.readOnlyFunctionCallEndpoint = '/v2/contracts/call-read';\n\n    this.isMainnet = () => this.version === TransactionVersion.Mainnet;\n\n    this.getBroadcastApiUrl = () => \"\".concat(this.coreApiUrl).concat(this.broadcastEndpoint);\n\n    this.getTransferFeeEstimateApiUrl = () => \"\".concat(this.coreApiUrl).concat(this.transferFeeEstimateEndpoint);\n\n    this.getAccountApiUrl = address => \"\".concat(this.coreApiUrl).concat(this.accountEndpoint, \"/\").concat(address, \"?proof=0\");\n\n    this.getAbiApiUrl = (address, contract) => \"\".concat(this.coreApiUrl).concat(this.contractAbiEndpoint, \"/\").concat(address, \"/\").concat(contract);\n\n    this.getReadOnlyFunctionCallApiUrl = (contractAddress, contractName, functionName) => \"\".concat(this.coreApiUrl).concat(this.readOnlyFunctionCallEndpoint, \"/\").concat(contractAddress, \"/\").concat(contractName, \"/\").concat(encodeURIComponent(functionName));\n\n    this.getInfoUrl = () => \"\".concat(this.coreApiUrl, \"/v2/info\");\n\n    this.getBlockTimeInfoUrl = () => \"\".concat(this.coreApiUrl, \"/extended/v1/info/network_block_times\");\n\n    this.getPoxInfoUrl = () => \"\".concat(this.coreApiUrl, \"/v2/pox\");\n\n    this.getRewardsUrl = (address, options) => {\n      let url = \"\".concat(this.coreApiUrl, \"/extended/v1/burnchain/rewards/\").concat(address);\n\n      if (options) {\n        url = \"\".concat(url, \"?limit=\").concat(options.limit, \"&offset=\").concat(options.offset);\n      }\n\n      return url;\n    };\n\n    this.getRewardsTotalUrl = address => \"\".concat(this.coreApiUrl, \"/extended/v1/burnchain/rewards/\").concat(address, \"/total\");\n\n    this.getRewardHoldersUrl = (address, options) => {\n      let url = \"\".concat(this.coreApiUrl, \"/extended/v1/burnchain/reward_slot_holders/\").concat(address);\n\n      if (options) {\n        url = \"\".concat(url, \"?limit=\").concat(options.limit, \"&offset=\").concat(options.offset);\n      }\n\n      return url;\n    };\n\n    this.getStackerInfoUrl = (contractAddress, contractName) => \"\".concat(this.coreApiUrl).concat(this.readOnlyFunctionCallEndpoint, \"\\n    \").concat(contractAddress, \"/\").concat(contractName, \"/get-stacker-info\");\n\n    this.coreApiUrl = networkUrl.url;\n  }\n\n  getNameInfo(fullyQualifiedName) {\n    const nameLookupURL = \"\".concat(this.bnsLookupUrl, \"/v1/names/\").concat(fullyQualifiedName);\n    return fetchPrivate(nameLookupURL).then(resp => {\n      if (resp.status === 404) {\n        throw new Error('Name not found');\n      } else if (resp.status !== 200) {\n        throw new Error(\"Bad response status: \".concat(resp.status));\n      } else {\n        return resp.json();\n      }\n    }).then(nameInfo => {\n      if (nameInfo.address) {\n        return Object.assign({}, nameInfo, {\n          address: nameInfo.address\n        });\n      } else {\n        return nameInfo;\n      }\n    });\n  }\n\n}\nexport class StacksTestnet extends StacksMainnet {\n  constructor() {\n    let networkUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      url: HIRO_TESTNET_DEFAULT\n    };\n    super(networkUrl);\n    this.version = TransactionVersion.Testnet;\n    this.chainId = ChainID.Testnet;\n  }\n\n}\nexport class StacksMocknet extends StacksMainnet {\n  constructor() {\n    let networkUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      url: HIRO_MOCKNET_DEFAULT\n    };\n    super(networkUrl);\n    this.version = TransactionVersion.Testnet;\n    this.chainId = ChainID.Testnet;\n  }\n\n}\nexport class StacksRegtest extends StacksMainnet {\n  constructor() {\n    let networkUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      url: HIRO_REGTEST_DEFAULT\n    };\n    super(networkUrl);\n    this.version = TransactionVersion.Testnet;\n    this.chainId = ChainID.Testnet;\n  }\n\n}","map":{"version":3,"sources":["../../src/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { TransactionVersion, ChainID, fetchPrivate } from '@stacks/common';\nexport const HIRO_MAINNET_DEFAULT = 'https://stacks-node-api.mainnet.stacks.co';\nexport const HIRO_REGTEST_DEFAULT = 'https://stacks-node-api.regtest.stacks.co';\nexport const HIRO_TESTNET_DEFAULT = 'https://stacks-node-api.testnet.stacks.co';\nexport const HIRO_MOCKNET_DEFAULT = 'http://localhost:3999';\nexport class StacksMainnet {\n    constructor(networkUrl = { url: HIRO_MAINNET_DEFAULT }) {\n        this.version = TransactionVersion.Mainnet;\n        this.chainId = ChainID.Mainnet;\n        this.bnsLookupUrl = 'https://stacks-node-api.mainnet.stacks.co';\n        this.broadcastEndpoint = '/v2/transactions';\n        this.transferFeeEstimateEndpoint = '/v2/fees/transfer';\n        this.accountEndpoint = '/v2/accounts';\n        this.contractAbiEndpoint = '/v2/contracts/interface';\n        this.readOnlyFunctionCallEndpoint = '/v2/contracts/call-read';\n        this.isMainnet = () => this.version === TransactionVersion.Mainnet;\n        this.getBroadcastApiUrl = () => `${this.coreApiUrl}${this.broadcastEndpoint}`;\n        this.getTransferFeeEstimateApiUrl = () => `${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`;\n        this.getAccountApiUrl = (address) => `${this.coreApiUrl}${this.accountEndpoint}/${address}?proof=0`;\n        this.getAbiApiUrl = (address, contract) => `${this.coreApiUrl}${this.contractAbiEndpoint}/${address}/${contract}`;\n        this.getReadOnlyFunctionCallApiUrl = (contractAddress, contractName, functionName) => `${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${contractAddress}/${contractName}/${encodeURIComponent(functionName)}`;\n        this.getInfoUrl = () => `${this.coreApiUrl}/v2/info`;\n        this.getBlockTimeInfoUrl = () => `${this.coreApiUrl}/extended/v1/info/network_block_times`;\n        this.getPoxInfoUrl = () => `${this.coreApiUrl}/v2/pox`;\n        this.getRewardsUrl = (address, options) => {\n            let url = `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}`;\n            if (options) {\n                url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n            }\n            return url;\n        };\n        this.getRewardsTotalUrl = (address) => `${this.coreApiUrl}/extended/v1/burnchain/rewards/${address}/total`;\n        this.getRewardHoldersUrl = (address, options) => {\n            let url = `${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${address}`;\n            if (options) {\n                url = `${url}?limit=${options.limit}&offset=${options.offset}`;\n            }\n            return url;\n        };\n        this.getStackerInfoUrl = (contractAddress, contractName) => `${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}\n    ${contractAddress}/${contractName}/get-stacker-info`;\n        this.coreApiUrl = networkUrl.url;\n    }\n    getNameInfo(fullyQualifiedName) {\n        const nameLookupURL = `${this.bnsLookupUrl}/v1/names/${fullyQualifiedName}`;\n        return fetchPrivate(nameLookupURL)\n            .then(resp => {\n            if (resp.status === 404) {\n                throw new Error('Name not found');\n            }\n            else if (resp.status !== 200) {\n                throw new Error(`Bad response status: ${resp.status}`);\n            }\n            else {\n                return resp.json();\n            }\n        })\n            .then(nameInfo => {\n            if (nameInfo.address) {\n                return Object.assign({}, nameInfo, { address: nameInfo.address });\n            }\n            else {\n                return nameInfo;\n            }\n        });\n    }\n}\nexport class StacksTestnet extends StacksMainnet {\n    constructor(networkUrl = { url: HIRO_TESTNET_DEFAULT }) {\n        super(networkUrl);\n        this.version = TransactionVersion.Testnet;\n        this.chainId = ChainID.Testnet;\n    }\n}\nexport class StacksMocknet extends StacksMainnet {\n    constructor(networkUrl = { url: HIRO_MOCKNET_DEFAULT }) {\n        super(networkUrl);\n        this.version = TransactionVersion.Testnet;\n        this.chainId = ChainID.Testnet;\n    }\n}\nexport class StacksRegtest extends StacksMainnet {\n    constructor(networkUrl = { url: HIRO_REGTEST_DEFAULT }) {\n        super(networkUrl);\n        this.version = TransactionVersion.Testnet;\n        this.chainId = ChainID.Testnet;\n    }\n}\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}