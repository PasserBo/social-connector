{"ast":null,"code":"import 'react';\nimport { createContext } from '../utils/index.esm.js';\nimport '../hooks/use-controllable.esm.js';\nimport '../hooks/use-previous.esm.js';\nimport '../hooks/use-disclosure.esm.js';\nimport '../hooks/use-latest-ref.esm.js';\nimport '../hooks/use-event-listener.esm.js';\nimport '../hooks/use-force-update.esm.js';\nimport '../hooks/use-id.esm.js';\nimport '../hooks/use-merge-refs.esm.js';\nimport '../hooks/use-safe-layout-effect.esm.js';\nimport '../hooks/use-timeout.esm.js';\nimport '../hooks/use-theme.esm.js';\nimport '../hooks/use-color-mode.esm.js';\n\nvar _createContext = /*#__PURE__*/createContext({\n  strict: false\n}),\n    usePortalManager = _createContext[1];\n\nexport { usePortalManager };","map":{"version":3,"sources":["../../src/portal/manager.tsx"],"names":["usePortalManager","createContext","strict"],"mappings":";;;;;;;;;;;;;;;kCAQqDC,aAAa,CAAuB;AACvFC,EAAAA,MAAM,EAAE;AAD+E,CAAvB,C;IAAjCF,gBAAAA,GAAAA,cAAAA,CAAAA,CAAAA,C","sourcesContent":["import * as React from 'react';\nimport { createContext, __DEV__ } from '../utils';\nimport { useSafeLayoutEffect, useForceUpdate } from '../hooks';\ninterface PortalManagerContext {\n  node: HTMLElement;\n  zIndex?: number;\n}\n\nconst [PortalManagerCtxProvider, usePortalManager] = createContext<PortalManagerContext>({\n  strict: false,\n});\n\nexport { usePortalManager };\n\nexport interface PortalManagerProps {\n  /**\n   * Child elements of the Portal manager\n   * Ideally, it should be at the top-level\n   * of your application\n   */\n  children?: React.ReactNode;\n  /**\n   * [Z-Index war] If your has multiple elements\n   * with z-index clashing, you might need to\n   * apply a z-index to the Portal manager\n   */\n  zIndex?: number;\n}\n\n/**\n * PortalManager\n *\n * Used to manage multiple portals within an application.\n * It must be render only once, at the root of your application.\n *\n * Inspired by BaseWeb's LayerManager component\n */\nexport function PortalManager(props: PortalManagerProps) {\n  const { children, zIndex } = props;\n\n  /**\n   * The element that wraps the stacked layers\n   */\n  const ref = React.useRef<HTMLDivElement>(null);\n\n  const forceUpdate = useForceUpdate();\n\n  /**\n   * force an update on mount so the Provider works correctly\n   */\n  useSafeLayoutEffect(() => {\n    forceUpdate();\n  }, []);\n\n  /**\n   * let's detect if use has mutiple instances of this component\n   */\n  const parentManager = usePortalManager();\n\n  const context = {\n    node: parentManager?.node || ref.current,\n    zIndex,\n  };\n\n  return (\n    <PortalManagerCtxProvider value={context}>\n      {children}\n      <div className=\"portal-manager\" ref={ref} />\n    </PortalManagerCtxProvider>\n  );\n}\n\nif (__DEV__) {\n  PortalManager.displayName = 'PortalManager';\n}\n"]},"metadata":{},"sourceType":"module"}