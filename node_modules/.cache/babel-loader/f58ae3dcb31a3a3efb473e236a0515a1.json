{"ast":null,"code":"import _toConsumableArray from\"/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// ** React Imports\nimport{useState,useEffect}from'react';// ** Custom Components\nimport Avatar from'@components/avatar';// ** Store & Actions\nimport{selectChat}from'./store';import{useDispatch}from'react-redux';// ** Utils\nimport{formatDateToMonthShort,isObjEmpty}from'@utils';// ** Third Party Components\nimport classnames from'classnames';import PerfectScrollbar from'react-perfect-scrollbar';import{X,Search,CheckSquare,Bell,User,Trash}from'react-feather';// ** Reactstrap Imports\nimport{CardText,InputGroup,InputGroupText,Badge,Input,Button,Label}from'reactstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SidebarLeft=function SidebarLeft(props){// ** Props & Store\nvar store=props.store,sidebar=props.sidebar,handleSidebar=props.handleSidebar,userSidebarLeft=props.userSidebarLeft,handleUserSidebarLeft=props.handleUserSidebarLeft;var chats=store.chats,contacts=store.contacts,userProfile=store.userProfile;// ** Dispatch\nvar dispatch=useDispatch();// ** State\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),about=_useState4[0],setAbout=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),active=_useState6[0],setActive=_useState6[1];var _useState7=useState('online'),_useState8=_slicedToArray(_useState7,2),status=_useState8[0],setStatus=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),filteredChat=_useState10[0],setFilteredChat=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),filteredContacts=_useState12[0],setFilteredContacts=_useState12[1];// ** Handles User Chat Click\nvar handleUserClick=function handleUserClick(id){dispatch(selectChat(id));setActive(id);if(sidebar===true){handleSidebar();}};useEffect(function(){if(!isObjEmpty(store.selectedUser)){if(store.selectedUser.chat){setActive(store.selectedUser.chat.id);}else{setActive(store.selectedUser.contact.id);}}},[]);// ** Renders Chat\nvar renderChats=function renderChats(){if(chats&&chats.length){if(query.length&&!filteredChat.length){return/*#__PURE__*/_jsx(\"li\",{className:\"no-results show\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"No Chats Found\"})});}else{var arrToMap=query.length&&filteredChat.length?filteredChat:chats;return arrToMap.map(function(item){var time=formatDateToMonthShort(item.chat.lastMessage?item.chat.lastMessage.time:new Date());return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){return handleUserClick(item.id);},className:classnames({active:active===item.id}),children:[/*#__PURE__*/_jsx(Avatar,{img:item.avatar,imgHeight:\"42\",imgWidth:\"42\",status:item.status}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-info flex-grow-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:item.fullName}),/*#__PURE__*/_jsx(CardText,{className:\"text-truncate\",children:item.chat.lastMessage?item.chat.lastMessage.message:chats[chats.length-1].message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-meta text-nowrap\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"float-end mb-25 chat-time ms-25\",children:time}),item.chat.unseenMsgs>=1?/*#__PURE__*/_jsx(Badge,{className:\"float-end\",color:\"danger\",pill:true,children:item.chat.unseenMsgs}):null]})]},item.id);});}}else{return null;}};// ** Renders Contact\nvar renderContacts=function renderContacts(){if(contacts&&contacts.length){if(query.length&&!filteredContacts.length){return/*#__PURE__*/_jsx(\"li\",{className:\"no-results show\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"No Chats Found\"})});}else{var arrToMap=query.length&&filteredContacts.length?filteredContacts:contacts;return arrToMap.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){return handleUserClick(item.id);},children:[/*#__PURE__*/_jsx(Avatar,{img:item.avatar,imgHeight:\"42\",imgWidth:\"42\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-info flex-grow-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:item.fullName}),/*#__PURE__*/_jsx(CardText,{className:\"text-truncate\",children:item.about})]})]},item.fullName);});}}else{return null;}};// ** Handles Filter\nvar handleFilter=function handleFilter(e){setQuery(e.target.value);var searchFilterFunction=function searchFilterFunction(contact){return contact.fullName.toLowerCase().includes(e.target.value.toLowerCase());};var filteredChatsArr=chats.filter(searchFilterFunction);var filteredContactssArr=contacts.filter(searchFilterFunction);setFilteredChat(_toConsumableArray(filteredChatsArr));setFilteredContacts(_toConsumableArray(filteredContactssArr));};var renderAboutCount=function renderAboutCount(){if(userProfile&&userProfile.about&&userProfile.about.length&&about.length===0){return userProfile.about.length;}else{return about.length;}};return store?/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:classnames('chat-profile-sidebar',{show:userSidebarLeft}),children:[/*#__PURE__*/_jsxs(\"header\",{className:\"chat-profile-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"close-icon\",onClick:handleUserSidebarLeft,children:/*#__PURE__*/_jsx(X,{size:14})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-profile-sidebar\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"box-shadow-1 avatar-border\",img:userProfile.avatar,status:status,size:\"xl\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"chat-user-name\",children:userProfile.fullName}),/*#__PURE__*/_jsx(\"span\",{className:\"user-post\",children:userProfile.role})]})]}),/*#__PURE__*/_jsxs(PerfectScrollbar,{className:\"profile-sidebar-area\",options:{wheelPropagation:false},children:[/*#__PURE__*/_jsx(\"h6\",{className:\"section-label mb-1\",children:\"About\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"about-user\",children:[/*#__PURE__*/_jsx(Input,{rows:\"5\",type:\"textarea\",defaultValue:userProfile.about,onChange:function onChange(e){return setAbout(e.target.value);},className:classnames('char-textarea',{'text-danger':about&&about.length>120})}),/*#__PURE__*/_jsxs(\"small\",{className:\"counter-value float-end\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"char-count\",children:renderAboutCount()}),\" / 120\"]})]}),/*#__PURE__*/_jsx(\"h6\",{className:\"section-label mb-1 mt-3\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled user-status\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"pb-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-check-success\",children:[/*#__PURE__*/_jsx(Input,{type:\"radio\",label:\"Online\",id:\"user-online\",checked:status==='online',onChange:function onChange(){return setStatus('online');}}),/*#__PURE__*/_jsx(Label,{className:\"form-check-label\",for:\"user-online\",children:\"Online\"})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"pb-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-check-danger\",children:[/*#__PURE__*/_jsx(Input,{type:\"radio\",id:\"user-busy\",label:\"Do Not Disturb\",checked:status==='busy',onChange:function onChange(){return setStatus('busy');}}),/*#__PURE__*/_jsx(Label,{className:\"form-check-label\",for:\"user-busy\",children:\"Busy\"})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"pb-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-check-warning\",children:[/*#__PURE__*/_jsx(Input,{type:\"radio\",label:\"Away\",id:\"user-away\",checked:status==='away',onChange:function onChange(){return setStatus('away');}}),/*#__PURE__*/_jsx(Label,{className:\"form-check-label\",for:\"user-away\",children:\"Away\"})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"pb-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-check-secondary\",children:[/*#__PURE__*/_jsx(Input,{type:\"radio\",label:\"Offline\",id:\"user-offline\",checked:status==='offline',onChange:function onChange(){return setStatus('offline');}}),/*#__PURE__*/_jsx(Label,{className:\"form-check-label\",for:\"user-offline\",children:\"Offline\"})]})})]}),/*#__PURE__*/_jsx(\"h6\",{className:\"section-label mb-1 mt-2\",children:\"Settings\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-unstyled\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"d-flex justify-content-between align-items-center mb-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(CheckSquare,{className:\"me-75\",size:\"18\"}),/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:\"Two-step Verification\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-switch\",children:/*#__PURE__*/_jsx(Input,{type:\"switch\",id:\"verification\",name:\"verification\",defaultChecked:true})})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"d-flex justify-content-between align-items-center mb-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Bell,{className:\"me-75\",size:\"18\"}),/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:\"Notification\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-switch\",children:/*#__PURE__*/_jsx(Input,{type:\"switch\",id:\"notifications\",name:\"notifications\"})})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"d-flex align-items-center cursor-pointer mb-1\",children:[/*#__PURE__*/_jsx(User,{className:\"me-75\",size:\"18\"}),/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:\"Invite Friends\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"d-flex align-items-center cursor-pointer\",children:[/*#__PURE__*/_jsx(Trash,{className:\"me-75\",size:\"18\"}),/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:\"Delete Account\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(Button,{color:\"primary\",children:\"Logout\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classnames('sidebar-content',{show:sidebar===true}),children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-close-icon\",onClick:handleSidebar,children:/*#__PURE__*/_jsx(X,{size:14})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-fixed-search\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center w-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-profile-toggle\",onClick:handleUserSidebarLeft,children:Object.keys(userProfile).length?/*#__PURE__*/_jsx(Avatar,{className:\"avatar-border\",img:userProfile.avatar,status:status,imgHeight:\"42\",imgWidth:\"42\"}):null}),/*#__PURE__*/_jsxs(InputGroup,{className:\"input-group-merge ms-1 w-100\",children:[/*#__PURE__*/_jsx(InputGroupText,{className:\"round\",children:/*#__PURE__*/_jsx(Search,{className:\"text-muted\",size:14})}),/*#__PURE__*/_jsx(Input,{value:query,className:\"round\",placeholder:\"Search or start a new chat\",onChange:handleFilter})]})]})}),/*#__PURE__*/_jsxs(PerfectScrollbar,{className:\"chat-user-list-wrapper list-group\",options:{wheelPropagation:false},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"chat-list-title\",children:\"Chats\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"chat-users-list chat-list media-list\",children:renderChats()}),/*#__PURE__*/_jsx(\"h4\",{className:\"chat-list-title\",children:\"Contacts\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"chat-users-list contact-list media-list\",children:renderContacts()})]})]})]})}):null;};export default SidebarLeft;","map":{"version":3,"sources":["/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/src/views/apps/chat/SidebarLeft.js"],"names":["useState","useEffect","Avatar","selectChat","useDispatch","formatDateToMonthShort","isObjEmpty","classnames","PerfectScrollbar","X","Search","CheckSquare","Bell","User","Trash","CardText","InputGroup","InputGroupText","Badge","Input","Button","Label","SidebarLeft","props","store","sidebar","handleSidebar","userSidebarLeft","handleUserSidebarLeft","chats","contacts","userProfile","dispatch","query","setQuery","about","setAbout","active","setActive","status","setStatus","filteredChat","setFilteredChat","filteredContacts","setFilteredContacts","handleUserClick","id","selectedUser","chat","contact","renderChats","length","arrToMap","map","item","time","lastMessage","Date","avatar","fullName","message","unseenMsgs","renderContacts","handleFilter","e","target","value","searchFilterFunction","toLowerCase","includes","filteredChatsArr","filter","filteredContactssArr","renderAboutCount","show","role","wheelPropagation","Object","keys"],"mappings":"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","sourcesContent":["// ** React Imports\r\nimport { useState, useEffect } from 'react'\r\n\r\n// ** Custom Components\r\nimport Avatar from '@components/avatar'\r\n\r\n// ** Store & Actions\r\nimport { selectChat } from './store'\r\nimport { useDispatch } from 'react-redux'\r\n\r\n// ** Utils\r\nimport { formatDateToMonthShort, isObjEmpty } from '@utils'\r\n\r\n// ** Third Party Components\r\nimport classnames from 'classnames'\r\nimport PerfectScrollbar from 'react-perfect-scrollbar'\r\nimport { X, Search, CheckSquare, Bell, User, Trash } from 'react-feather'\r\n\r\n// ** Reactstrap Imports\r\nimport { CardText, InputGroup, InputGroupText, Badge, Input, Button, Label } from 'reactstrap'\r\n\r\nconst SidebarLeft = props => {\r\n  // ** Props & Store\r\n  const { store, sidebar, handleSidebar, userSidebarLeft, handleUserSidebarLeft } = props\r\n  const { chats, contacts, userProfile } = store\r\n\r\n  // ** Dispatch\r\n  const dispatch = useDispatch()\r\n\r\n  // ** State\r\n  const [query, setQuery] = useState('')\r\n  const [about, setAbout] = useState('')\r\n  const [active, setActive] = useState(0)\r\n  const [status, setStatus] = useState('online')\r\n  const [filteredChat, setFilteredChat] = useState([])\r\n  const [filteredContacts, setFilteredContacts] = useState([])\r\n\r\n  // ** Handles User Chat Click\r\n  const handleUserClick = id => {\r\n    dispatch(selectChat(id))\r\n    setActive(id)\r\n    if (sidebar === true) {\r\n      handleSidebar()\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!isObjEmpty(store.selectedUser)) {\r\n      if (store.selectedUser.chat) {\r\n        setActive(store.selectedUser.chat.id)\r\n      } else {\r\n        setActive(store.selectedUser.contact.id)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // ** Renders Chat\r\n  const renderChats = () => {\r\n    if (chats && chats.length) {\r\n      if (query.length && !filteredChat.length) {\r\n        return (\r\n          <li className='no-results show'>\r\n            <h6 className='mb-0'>No Chats Found</h6>\r\n          </li>\r\n        )\r\n      } else {\r\n        const arrToMap = query.length && filteredChat.length ? filteredChat : chats\r\n\r\n        return arrToMap.map(item => {\r\n          const time = formatDateToMonthShort(item.chat.lastMessage ? item.chat.lastMessage.time : new Date())\r\n\r\n          return (\r\n            <li\r\n              key={item.id}\r\n              onClick={() => handleUserClick(item.id)}\r\n              className={classnames({\r\n                active: active === item.id\r\n              })}\r\n            >\r\n              <Avatar img={item.avatar} imgHeight='42' imgWidth='42' status={item.status} />\r\n              <div className='chat-info flex-grow-1'>\r\n                <h5 className='mb-0'>{item.fullName}</h5>\r\n                <CardText className='text-truncate'>\r\n                  {item.chat.lastMessage ? item.chat.lastMessage.message : chats[chats.length - 1].message}\r\n                </CardText>\r\n              </div>\r\n              <div className='chat-meta text-nowrap'>\r\n                <small className='float-end mb-25 chat-time ms-25'>{time}</small>\r\n                {item.chat.unseenMsgs >= 1 ? (\r\n                  <Badge className='float-end' color='danger' pill>\r\n                    {item.chat.unseenMsgs}\r\n                  </Badge>\r\n                ) : null}\r\n              </div>\r\n            </li>\r\n          )\r\n        })\r\n      }\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  // ** Renders Contact\r\n  const renderContacts = () => {\r\n    if (contacts && contacts.length) {\r\n      if (query.length && !filteredContacts.length) {\r\n        return (\r\n          <li className='no-results show'>\r\n            <h6 className='mb-0'>No Chats Found</h6>\r\n          </li>\r\n        )\r\n      } else {\r\n        const arrToMap = query.length && filteredContacts.length ? filteredContacts : contacts\r\n        return arrToMap.map(item => {\r\n          return (\r\n            <li key={item.fullName} onClick={() => handleUserClick(item.id)}>\r\n              <Avatar img={item.avatar} imgHeight='42' imgWidth='42' />\r\n              <div className='chat-info flex-grow-1'>\r\n                <h5 className='mb-0'>{item.fullName}</h5>\r\n                <CardText className='text-truncate'>{item.about}</CardText>\r\n              </div>\r\n            </li>\r\n          )\r\n        })\r\n      }\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  // ** Handles Filter\r\n  const handleFilter = e => {\r\n    setQuery(e.target.value)\r\n    const searchFilterFunction = contact => contact.fullName.toLowerCase().includes(e.target.value.toLowerCase())\r\n    const filteredChatsArr = chats.filter(searchFilterFunction)\r\n    const filteredContactssArr = contacts.filter(searchFilterFunction)\r\n    setFilteredChat([...filteredChatsArr])\r\n    setFilteredContacts([...filteredContactssArr])\r\n  }\r\n\r\n  const renderAboutCount = () => {\r\n    if (userProfile && userProfile.about && userProfile.about.length && about.length === 0) {\r\n      return userProfile.about.length\r\n    } else {\r\n      return about.length\r\n    }\r\n  }\r\n\r\n  return store ? (\r\n    <div className='sidebar-left'>\r\n      <div className='sidebar'>\r\n        <div\r\n          className={classnames('chat-profile-sidebar', {\r\n            show: userSidebarLeft\r\n          })}\r\n        >\r\n          <header className='chat-profile-header'>\r\n            <div className='close-icon' onClick={handleUserSidebarLeft}>\r\n              <X size={14} />\r\n            </div>\r\n            <div className='header-profile-sidebar'>\r\n              <Avatar className='box-shadow-1 avatar-border' img={userProfile.avatar} status={status} size='xl' />\r\n              <h4 className='chat-user-name'>{userProfile.fullName}</h4>\r\n              <span className='user-post'>{userProfile.role}</span>\r\n            </div>\r\n          </header>\r\n          <PerfectScrollbar className='profile-sidebar-area' options={{ wheelPropagation: false }}>\r\n            <h6 className='section-label mb-1'>About</h6>\r\n            <div className='about-user'>\r\n              <Input\r\n                rows='5'\r\n                type='textarea'\r\n                defaultValue={userProfile.about}\r\n                onChange={e => setAbout(e.target.value)}\r\n                className={classnames('char-textarea', {\r\n                  'text-danger': about && about.length > 120\r\n                })}\r\n              />\r\n              <small className='counter-value float-end'>\r\n                <span className='char-count'>{renderAboutCount()}</span> / 120\r\n              </small>\r\n            </div>\r\n            <h6 className='section-label mb-1 mt-3'>Status</h6>\r\n            <ul className='list-unstyled user-status'>\r\n              <li className='pb-1'>\r\n                <div className='form-check form-check-success'>\r\n                  <Input\r\n                    type='radio'\r\n                    label='Online'\r\n                    id='user-online'\r\n                    checked={status === 'online'}\r\n                    onChange={() => setStatus('online')}\r\n                  />\r\n                  <Label className='form-check-label' for='user-online'>\r\n                    Online\r\n                  </Label>\r\n                </div>\r\n              </li>\r\n              <li className='pb-1'>\r\n                <div className='form-check form-check-danger'>\r\n                  <Input\r\n                    type='radio'\r\n                    id='user-busy'\r\n                    label='Do Not Disturb'\r\n                    checked={status === 'busy'}\r\n                    onChange={() => setStatus('busy')}\r\n                  />\r\n                  <Label className='form-check-label' for='user-busy'>\r\n                    Busy\r\n                  </Label>\r\n                </div>\r\n              </li>\r\n              <li className='pb-1'>\r\n                <div className='form-check form-check-warning'>\r\n                  <Input\r\n                    type='radio'\r\n                    label='Away'\r\n                    id='user-away'\r\n                    checked={status === 'away'}\r\n                    onChange={() => setStatus('away')}\r\n                  />\r\n                  <Label className='form-check-label' for='user-away'>\r\n                    Away\r\n                  </Label>\r\n                </div>\r\n              </li>\r\n              <li className='pb-1'>\r\n                <div className='form-check form-check-secondary'>\r\n                  <Input\r\n                    type='radio'\r\n                    label='Offline'\r\n                    id='user-offline'\r\n                    checked={status === 'offline'}\r\n                    onChange={() => setStatus('offline')}\r\n                  />\r\n                  <Label className='form-check-label' for='user-offline'>\r\n                    Offline\r\n                  </Label>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n            <h6 className='section-label mb-1 mt-2'>Settings</h6>\r\n            <ul className='list-unstyled'>\r\n              <li className='d-flex justify-content-between align-items-center mb-1'>\r\n                <div className='d-flex align-items-center'>\r\n                  <CheckSquare className='me-75' size='18' />\r\n                  <span className='align-middle'>Two-step Verification</span>\r\n                </div>\r\n                <div className='form-switch'>\r\n                  <Input type='switch' id='verification' name='verification' defaultChecked />\r\n                </div>\r\n              </li>\r\n              <li className='d-flex justify-content-between align-items-center mb-1'>\r\n                <div className='d-flex align-items-center'>\r\n                  <Bell className='me-75' size='18' />\r\n                  <span className='align-middle'>Notification</span>\r\n                </div>\r\n                <div className='form-switch'>\r\n                  <Input type='switch' id='notifications' name='notifications' />\r\n                </div>\r\n              </li>\r\n              <li className='d-flex align-items-center cursor-pointer mb-1'>\r\n                <User className='me-75' size='18' />\r\n                <span className='align-middle'>Invite Friends</span>\r\n              </li>\r\n              <li className='d-flex align-items-center cursor-pointer'>\r\n                <Trash className='me-75' size='18' />\r\n                <span className='align-middle'>Delete Account</span>\r\n              </li>\r\n            </ul>\r\n            <div className='mt-3'>\r\n              <Button color='primary'>Logout</Button>\r\n            </div>\r\n          </PerfectScrollbar>\r\n        </div>\r\n        <div\r\n          className={classnames('sidebar-content', {\r\n            show: sidebar === true\r\n          })}\r\n        >\r\n          <div className='sidebar-close-icon' onClick={handleSidebar}>\r\n            <X size={14} />\r\n          </div>\r\n          <div className='chat-fixed-search'>\r\n            <div className='d-flex align-items-center w-100'>\r\n              <div className='sidebar-profile-toggle' onClick={handleUserSidebarLeft}>\r\n                {Object.keys(userProfile).length ? (\r\n                  <Avatar\r\n                    className='avatar-border'\r\n                    img={userProfile.avatar}\r\n                    status={status}\r\n                    imgHeight='42'\r\n                    imgWidth='42'\r\n                  />\r\n                ) : null}\r\n              </div>\r\n              <InputGroup className='input-group-merge ms-1 w-100'>\r\n                <InputGroupText className='round'>\r\n                  <Search className='text-muted' size={14} />\r\n                </InputGroupText>\r\n                <Input\r\n                  value={query}\r\n                  className='round'\r\n                  placeholder='Search or start a new chat'\r\n                  onChange={handleFilter}\r\n                />\r\n              </InputGroup>\r\n            </div>\r\n          </div>\r\n          <PerfectScrollbar className='chat-user-list-wrapper list-group' options={{ wheelPropagation: false }}>\r\n            <h4 className='chat-list-title'>Chats</h4>\r\n            <ul className='chat-users-list chat-list media-list'>{renderChats()}</ul>\r\n            <h4 className='chat-list-title'>Contacts</h4>\r\n            <ul className='chat-users-list contact-list media-list'>{renderContacts()}</ul>\r\n          </PerfectScrollbar>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : null\r\n}\r\n\r\nexport default SidebarLeft\r\n"]},"metadata":{},"sourceType":"module"}