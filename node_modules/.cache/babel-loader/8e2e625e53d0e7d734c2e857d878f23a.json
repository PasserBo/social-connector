{"ast":null,"code":"import mock from'../mock';const data={tasks:[{id:1,title:'Buy a blender',dueDate:'2020-08-20',description:'I want deals on blenders, show me new models.',assignee:{fullName:'',avatar:''},tags:['update'],isCompleted:false,isDeleted:false,isImportant:false},{id:2,title:'Movies',dueDate:'2021-08-20',description:'Movie Trailers.',assignee:{fullName:'',avatar:''},tags:['team','medium'],isCompleted:false,isDeleted:false,isImportant:false},{id:3,title:'Amazing restaurants in Pittsburgh ❤️',dueDate:'2021-08-20',description:'Find a restaurant for my aniversary!',assignee:{fullName:'',avatar:''},tags:['high'],isCompleted:false,isDeleted:false,isImportant:false}]};// ------------------------------------------------\n// GET: Return Tasks\n// ------------------------------------------------\nmock.onGet('/apps/todo/tasks').reply(config=>{// eslint-disable-next-line object-curly-newline\nconst{q='',filter,tag,sortBy:sortByParam='latest'}=config.params;/* eslint-enable */ // ------------------------------------------------\n// Get Sort by and Sort Direction\n// ------------------------------------------------\nlet sortDesc=true;const sortBy=(()=>{if(sortByParam==='title-asc'){sortDesc=false;return'title';}if(sortByParam==='title-desc')return'title';if(sortByParam==='assignee'){sortDesc=false;return'assignee';}if(sortByParam==='due-date'){sortDesc=false;return'dueDate';}return'id';})();// ------------------------------------------------\n// Filtering\n// ------------------------------------------------\nconst queryLowered=q.toLowerCase();const hasFilter=task=>{if(filter==='important')return task.isImportant&&!task.isDeleted;if(filter==='completed')return task.isCompleted&&!task.isDeleted;if(filter==='deleted')return task.isDeleted;return!task.isDeleted;};/* eslint-disable */const filteredData=data.tasks.filter(task=>{return task.title.toLowerCase().includes(queryLowered)&&hasFilter(task)&&(tag?task.tags.includes(tag):true);});/* eslint-enable  */ // ------------------------------------------------\n// Perform sorting\n// ------------------------------------------------\nconst sortTasks=key=>(a,b)=>{let fieldA;let fieldB;// If sorting is by dueDate => Convert data to date\nif(key==='dueDate'){fieldA=new Date(a[key]);fieldB=new Date(b[key]);// eslint-disable-next-line brace-style\n}// If sorting is by assignee => Use `fullName` of assignee\nelse if(key==='assignee'){fieldA=a.assignee?a.assignee.fullName:null;fieldB=b.assignee?b.assignee.fullName:null;}else{fieldA=a[key];fieldB=b[key];}let comparison=0;if(fieldA===fieldB){comparison=0;}else if(fieldA===null){comparison=1;}else if(fieldB===null){comparison=-1;}else if(fieldA>fieldB){comparison=1;}else if(fieldA<fieldB){comparison=-1;}return comparison;};// Sort Data\nconst sortedData=filteredData.sort(sortTasks(sortBy));if(sortDesc)sortedData.reverse();return[200,sortedData];});// ------------------------------------------------\n// POST: Add new task\n// ------------------------------------------------\nmock.onPost('/apps/todo/add-tasks').reply(config=>{// Get event from post data\nconst{task}=JSON.parse(config.data);const{length}=data.tasks;let lastIndex=0;if(length){lastIndex=data.tasks[length-1].id;}task.id=lastIndex+1;data.tasks.push(task);return[201,{task}];});// ------------------------------------------------\n// POST: Update Task\n// ------------------------------------------------\nmock.onPost('/apps/todo/update-task').reply(config=>{const taskData=JSON.parse(config.data).task;// Convert Id to number\ntaskData.id=Number(taskData.id);const task=data.tasks.find(e=>e.id===Number(taskData.id));Object.assign(task,taskData);return[200,{task}];});// ------------------------------------------------\n// DELETE: Remove Task\n// ------------------------------------------------\nmock.onDelete('/apps/todo/delete-task').reply(config=>{// Get task id from URL\nlet taskId=config.taskId;// Convert Id to number\ntaskId=Number(taskId);const task=data.tasks.find(t=>t.id===taskId);Object.assign(task,{isDeleted:true});return[200];});","map":{"version":3,"sources":["/Users/jvledesma/Downloads/react-version/full-version/src/@fake-db/apps/todo.js"],"names":["mock","data","tasks","id","title","dueDate","description","assignee","fullName","avatar","tags","isCompleted","isDeleted","isImportant","onGet","reply","config","q","filter","tag","sortBy","sortByParam","params","sortDesc","queryLowered","toLowerCase","hasFilter","task","filteredData","includes","sortTasks","key","a","b","fieldA","fieldB","Date","comparison","sortedData","sort","reverse","onPost","JSON","parse","length","lastIndex","push","taskData","Number","find","e","Object","assign","onDelete","taskId","t"],"mappings":"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","sourcesContent":["import mock from '../mock'\n\nconst data = {\n  tasks: [\n    {\n      id: 1,\n      title: 'Buy a blender',\n      dueDate: '2020-08-20',\n      description:\n        'I want deals on blenders, show me new models.',\n      assignee: {\n        fullName: '',\n        avatar: ''\n      },\n      tags: ['update'],\n      isCompleted: false,\n      isDeleted: false,\n      isImportant: false\n    },\n    {\n      id: 2,\n      title: 'Movies',\n      dueDate: '2021-08-20',\n      description:\n        'Movie Trailers.',\n      assignee: {\n        fullName: '',\n        avatar: ''\n      },\n      tags: ['team', 'medium'],\n      isCompleted: false,\n      isDeleted: false,\n      isImportant: false\n    },\n    {\n      id: 3,\n      title: 'Amazing restaurants in Pittsburgh ❤️',\n      dueDate: '2021-08-20',\n      description:\n        'Find a restaurant for my aniversary!',\n      assignee: {\n        fullName: '',\n        avatar: ''\n      },\n      tags: ['high'],\n      isCompleted: false,\n      isDeleted: false,\n      isImportant: false\n    }\n  ]\n}\n\n// ------------------------------------------------\n// GET: Return Tasks\n// ------------------------------------------------\nmock.onGet('/apps/todo/tasks').reply(config => {\n  // eslint-disable-next-line object-curly-newline\n  const { q = '', filter, tag, sortBy: sortByParam = 'latest' } = config.params\n  /* eslint-enable */\n  // ------------------------------------------------\n  // Get Sort by and Sort Direction\n  // ------------------------------------------------\n  let sortDesc = true\n\n  const sortBy = (() => {\n    if (sortByParam === 'title-asc') {\n      sortDesc = false\n      return 'title'\n    }\n    if (sortByParam === 'title-desc') return 'title'\n    if (sortByParam === 'assignee') {\n      sortDesc = false\n      return 'assignee'\n    }\n    if (sortByParam === 'due-date') {\n      sortDesc = false\n      return 'dueDate'\n    }\n    return 'id'\n  })()\n\n  // ------------------------------------------------\n  // Filtering\n  // ------------------------------------------------\n  const queryLowered = q.toLowerCase()\n\n  const hasFilter = task => {\n    if (filter === 'important') return task.isImportant && !task.isDeleted\n    if (filter === 'completed') return task.isCompleted && !task.isDeleted\n    if (filter === 'deleted') return task.isDeleted\n    return !task.isDeleted\n  }\n  /* eslint-disable */\n  const filteredData = data.tasks.filter(task => {\n    return task.title.toLowerCase().includes(queryLowered) && hasFilter(task) && (tag ? task.tags.includes(tag) : true)\n  })\n  /* eslint-enable  */\n\n  // ------------------------------------------------\n  // Perform sorting\n  // ------------------------------------------------\n  const sortTasks = key => (a, b) => {\n    let fieldA\n    let fieldB\n\n    // If sorting is by dueDate => Convert data to date\n    if (key === 'dueDate') {\n      fieldA = new Date(a[key])\n      fieldB = new Date(b[key])\n      // eslint-disable-next-line brace-style\n    }\n\n    // If sorting is by assignee => Use `fullName` of assignee\n    else if (key === 'assignee') {\n      fieldA = a.assignee ? a.assignee.fullName : null\n      fieldB = b.assignee ? b.assignee.fullName : null\n    } else {\n      fieldA = a[key]\n      fieldB = b[key]\n    }\n\n    let comparison = 0\n\n    if (fieldA === fieldB) {\n      comparison = 0\n    } else if (fieldA === null) {\n      comparison = 1\n    } else if (fieldB === null) {\n      comparison = -1\n    } else if (fieldA > fieldB) {\n      comparison = 1\n    } else if (fieldA < fieldB) {\n      comparison = -1\n    }\n\n    return comparison\n  }\n\n  // Sort Data\n  const sortedData = filteredData.sort(sortTasks(sortBy))\n  if (sortDesc) sortedData.reverse()\n  return [200, sortedData]\n})\n\n// ------------------------------------------------\n// POST: Add new task\n// ------------------------------------------------\nmock.onPost('/apps/todo/add-tasks').reply(config => {\n  // Get event from post data\n  const { task } = JSON.parse(config.data)\n\n  const { length } = data.tasks\n  let lastIndex = 0\n  if (length) {\n    lastIndex = data.tasks[length - 1].id\n  }\n  task.id = lastIndex + 1\n\n  data.tasks.push(task)\n\n  return [201, { task }]\n})\n\n// ------------------------------------------------\n// POST: Update Task\n// ------------------------------------------------\nmock.onPost('/apps/todo/update-task').reply(config => {\n  const taskData = JSON.parse(config.data).task\n\n  // Convert Id to number\n  taskData.id = Number(taskData.id)\n\n  const task = data.tasks.find(e => e.id === Number(taskData.id))\n  Object.assign(task, taskData)\n\n  return [200, { task }]\n})\n\n// ------------------------------------------------\n// DELETE: Remove Task\n// ------------------------------------------------\nmock.onDelete('/apps/todo/delete-task').reply(config => {\n  // Get task id from URL\n  let taskId = config.taskId\n\n  // Convert Id to number\n  taskId = Number(taskId)\n\n  const task = data.tasks.find(t => t.id === taskId)\n  Object.assign(task, { isDeleted: true })\n  return [200]\n})\n"]},"metadata":{},"sourceType":"module"}