{"ast":null,"code":"// ** React Imports\nimport{Fragment,useState}from'react';// ** Custom Components\nimport Avatar from'@components/avatar';// ** Third Party Components\nimport{toast}from'react-toastify';import Flatpickr from'react-flatpickr';import{X,Check}from'react-feather';import Select,{components}from'react-select';import PerfectScrollbar from'react-perfect-scrollbar';import{useForm,Controller}from'react-hook-form';// ** Reactstrap Imports\nimport{Button,Modal,ModalHeader,ModalBody,Label,Input,Form}from'reactstrap';// ** Utils\nimport{selectThemeColors,isObjEmpty}from'@utils';// ** Avatar Images\nimport img1 from'@src/assets/images/avatars/1-small.png';// ** Styles Imports\nimport'@styles/react/libs/react-select/_react-select.scss';import'@styles/react/libs/flatpickr/flatpickr.scss';// ** Toast Component\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ToastComponent=_ref=>{let{title,icon,color}=_ref;return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"toastify-header pb-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"title-wrapper\",children:[/*#__PURE__*/_jsx(Avatar,{size:\"sm\",color:color,icon:icon}),/*#__PURE__*/_jsx(\"h6\",{className:\"toast-title\",children:title})]})})});};const AddEventSidebar=props=>{// ** Props\nconst{open,store,dispatch,addEvent,calendarApi,selectEvent,updateEvent,removeEvent,refetchEvents,calendarsColor,handleAddEventSidebar}=props;// ** Vars & Hooks\nconst selectedEvent=store.selectedEvent,{control,setError,setValue,getValues,handleSubmit,formState:{errors}}=useForm({defaultValues:{title:''}});// ** States\nconst[url,setUrl]=useState('');const[desc,setDesc]=useState('');const[guests,setGuests]=useState({});const[allDay,setAllDay]=useState(false);const[location,setLocation]=useState('');const[endPicker,setEndPicker]=useState(new Date());const[startPicker,setStartPicker]=useState(new Date());const[calendarLabel,setCalendarLabel]=useState([{value:'Billboards',label:'Billboards.btc',color:'primary'}]);// ** Select Options\nconst options=[{value:'Billboards',label:'Billboards.btc',color:'success',className:'form-check-danger mb-1'},{value:'Times Sq',label:'Times2.btc',color:'success',className:'form-check-info'},{value:'Screens',label:'Screens.btc',color:'primary',className:'form-check-primary mb-1'},{value:'Agency',label:'Agency.btc',color:'primary',className:'form-check-info'},{value:'Advertising',label:'Advertising.btc',color:'primary',className:'form-check-info'},{value:'Direct Mail',label:'Direct Mail.btc',color:'info',className:'form-check-info'},{value:'Panorama',label:'Panorama.btc',color:'primary',className:'form-check-info'},{value:'Office',label:'Office.btc',color:'primary',className:'form-check-warning mb-1'},{value:'Malls',label:'Malls.btc',color:'success',className:'form-check-success mb-1'},{value:'Say',label:'Say.btc',color:'success',className:'form-check-primary mb-1'},{value:'Stadium',label:'Stadium.btc',color:'info',className:'form-check-info'},{value:'Gyms',label:'Gyms.btc',color:'info',className:'form-check-info'},{value:'Classifieds',label:'Classifieds.btc',color:'primary',className:'form-check-info'}];const guestsOptions=[{value:'USA',label:'USA',avatar:img1},{value:'CAN',label:'Canada',avatar:img1},{value:'Global',label:'Global',avatar:img1}];// ** Custom Select components\nconst OptionComponent=_ref2=>{let{data,...props}=_ref2;return/*#__PURE__*/_jsxs(components.Option,{...props,children:[/*#__PURE__*/_jsx(\"span\",{className:\"bullet bullet-\".concat(data.color,\" bullet-sm me-50\")}),data.label]});};const GuestsComponent=_ref3=>{let{data,...props}=_ref3;return/*#__PURE__*/_jsx(components.Option,{...props,children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap align-items-center\",children:/*#__PURE__*/_jsx(\"div\",{children:data.label})})});};// ** Adds New Ad\nconst handleAddEvent=()=>{const obj={title:getValues('title'),start:startPicker,end:endPicker,allDay,display:'block',extendedProps:{calendar:calendarLabel[0].label,url:url.length?url:undefined,guests:guests.length?guests:undefined,location:location.length?location:undefined,desc:desc.length?desc:undefined}};dispatch(addEvent(obj));refetchEvents();handleAddEventSidebar();toast.success(/*#__PURE__*/_jsx(ToastComponent,{title:\"Ad Booked - Ready to Publish\",color:\"success\",icon:/*#__PURE__*/_jsx(Check,{})}),{icon:false,autoClose:2000,hideProgressBar:true,closeButton:false});};// ** Reset Input Values on Close\nconst handleResetInputValues=()=>{dispatch(selectEvent({}));setValue('title','');setAllDay(false);setUrl('');setLocation('');setDesc('');setGuests({});setCalendarLabel([{value:'Billboards',label:'Billboards.btc',color:'primary'}]);setStartPicker(new Date());setEndPicker(new Date());};// ** Set sidebar fields\nconst handleSelectedEvent=()=>{if(!isObjEmpty(selectedEvent)){const calendar=selectedEvent.extendedProps.calendar;const resolveLabel=()=>{if(calendar.length){return{label:calendar,value:calendar,color:calendarsColor[calendar]};}else{return{value:'Billboards',label:'Billboards.btc',color:'primary'};}};setValue('title',selectedEvent.title||getValues('title'));setAllDay(selectedEvent.allDay||allDay);setUrl(selectedEvent.url||url);setLocation(selectedEvent.extendedProps.location||location);setDesc(selectedEvent.extendedProps.description||desc);setGuests(selectedEvent.extendedProps.guests||guests);setStartPicker(new Date(selectedEvent.start));setEndPicker(selectedEvent.allDay?new Date(selectedEvent.start):new Date(selectedEvent.end));setCalendarLabel([resolveLabel()]);}};// ** (UI) updateEventInCalendar\nconst updateEventInCalendar=(updatedEventData,propsToUpdate,extendedPropsToUpdate)=>{const existingEvent=calendarApi.getEventById(updatedEventData.id);// ** Set ad properties except date related\nfor(let index=0;index<propsToUpdate.length;index++){const propName=propsToUpdate[index];existingEvent.setProp(propName,updatedEventData[propName]);}// ** Set date related props\nexistingEvent.setDates(new Date(updatedEventData.start),new Date(updatedEventData.end),{allDay:updatedEventData.allDay});// ** Set ad's extendedProps\nfor(let index=0;index<extendedPropsToUpdate.length;index++){const propName=extendedPropsToUpdate[index];existingEvent.setExtendedProp(propName,updatedEventData.extendedProps[propName]);}};// ** Updates Ads in Store\nconst handleUpdateEvent=()=>{if(getValues('title').length){const eventToUpdate={id:selectedEvent.id,title:getValues('title'),allDay,start:startPicker,end:endPicker,url,display:allDay===false?'block':undefined,extendedProps:{location,description:desc,guests,calendar:calendarLabel[0].label}};const propsToUpdate=['id','title','url'];const extendedPropsToUpdate=['calendar','guests','location','description'];dispatch(updateEvent(eventToUpdate));updateEventInCalendar(eventToUpdate,propsToUpdate,extendedPropsToUpdate);handleAddEventSidebar();toast.success(/*#__PURE__*/_jsx(ToastComponent,{title:\"Ad Updated\",color:\"success\",icon:/*#__PURE__*/_jsx(Check,{})}),{icon:false,autoClose:2000,hideProgressBar:true,closeButton:false});}else{setError('title',{type:'manual'});}};// ** (UI) removeEventInCalendar\nconst removeEventInCalendar=eventId=>{calendarApi.getEventById(eventId).remove();};const handleDeleteEvent=()=>{dispatch(removeEvent(selectedEvent.id));removeEventInCalendar(selectedEvent.id);handleAddEventSidebar();toast.error(/*#__PURE__*/_jsx(ToastComponent,{title:\"Ad Removed\",color:\"danger\",icon:/*#__PURE__*/_jsx(Trash,{})}),{icon:false,autoClose:2000,hideProgressBar:true,closeButton:false});};// ** Event Action buttons\nconst EventActions=()=>{if(isObjEmpty(selectedEvent)||!isObjEmpty(selectedEvent)&&!selectedEvent.title.length){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{className:\"me-1\",type:\"submit\",color:\"primary\",children:\"Add\"}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",type:\"reset\",onClick:handleAddEventSidebar,outline:true,children:\"Cancel\"})]});}else{return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{className:\"me-1\",color:\"primary\",onClick:handleUpdateEvent,children:\"Update\"}),/*#__PURE__*/_jsx(Button,{color:\"danger\",onClick:handleDeleteEvent,outline:true,children:\"Delete\"})]});}};// ** Close BTN\nconst CloseBtn=/*#__PURE__*/_jsx(X,{className:\"cursor-pointer\",size:15,onClick:handleAddEventSidebar});return/*#__PURE__*/_jsxs(Modal,{isOpen:open,className:\"sidebar-lg\",toggle:handleAddEventSidebar,onOpened:handleSelectedEvent,onClosed:handleResetInputValues,contentClassName:\"p-0 overflow-hidden\",modalClassName:\"modal-slide-in event-sidebar\",children:[/*#__PURE__*/_jsx(ModalHeader,{className:\"mb-1\",toggle:handleAddEventSidebar,close:CloseBtn,tag:\"div\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",children:[selectedEvent&&selectedEvent.title&&selectedEvent.title.length?'Update':'Book',\" Ad\"]})}),/*#__PURE__*/_jsx(PerfectScrollbar,{options:{wheelPropagation:false},children:/*#__PURE__*/_jsx(ModalBody,{className:\"flex-grow-1 pb-sm-0 pb-3\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(data=>{if(data.title.length){if(isObjEmpty(errors)){if(isObjEmpty(selectedEvent)||!isObjEmpty(selectedEvent)&&!selectedEvent.title.length){handleAddEvent();}else{handleUpdateEvent();}handleAddEventSidebar();}}else{setError('title',{type:'manual'});}}),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsxs(Label,{className:\"form-label\",for:\"title\",children:[\"Title \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(Controller,{name:\"title\",control:control,render:_ref4=>{let{field}=_ref4;return/*#__PURE__*/_jsx(Input,{id:\"title\",placeholder:\"Title\",invalid:errors.title&&true,...field});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(Label,{className:\"form-label\",for:\"label\",children:\"Distribution Network\"}),/*#__PURE__*/_jsx(Select,{id:\"label\",value:calendarLabel,options:options,theme:selectThemeColors,className:\"react-select\",classNamePrefix:\"select\",isClearable:false,onChange:data=>setCalendarLabel([data]),components:{Option:OptionComponent}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(Label,{className:\"form-label\",for:\"startDate\",children:\"Start Date\"}),/*#__PURE__*/_jsx(Flatpickr,{required:true,id:\"startDate\",name:\"startDate\",className:\"form-control\",onChange:date=>setStartPicker(date[0]),value:startPicker,options:{enableTime:allDay===false,dateFormat:'Y-m-d H:i'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(Label,{className:\"form-label\",for:\"endDate\",children:\"End Date\"}),/*#__PURE__*/_jsx(Flatpickr,{required:true,id:\"endDate\"// tag={Flatpickr}\n,name:\"endDate\",className:\"form-control\",onChange:date=>setEndPicker(date[0]),value:endPicker,options:{enableTime:allDay===false,dateFormat:'Y-m-d H:i'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-switch mb-1\",children:[/*#__PURE__*/_jsx(Input,{id:\"allDay\",type:\"switch\",className:\"me-1\",checked:allDay,name:\"customSwitch\",onChange:e=>setAllDay(e.target.checked)}),/*#__PURE__*/_jsx(Label,{className:\"form-label\",for:\"allDay\",children:\"All Day\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(Label,{className:\"form-label\",for:\"eventURL\",children:\"URL for the Art (PNG, JPG, SVG, HTML) (TIFF only available for Agency Networks)\"}),/*#__PURE__*/_jsx(Input,{type:\"url\",id:\"eventURL\",value:url,onChange:e=>setUrl(e.target.value),placeholder:\"https://www.bitfari.org\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(Label,{className:\"form-label\",for:\"guests\",children:\"Choose a Location\"}),/*#__PURE__*/_jsx(Select,{isMulti:true,id:\"guests\",className:\"react-select\",classNamePrefix:\"select\",isClearable:false,options:guestsOptions,theme:selectThemeColors,value:guests.length?[...guests]:null,onChange:data=>setGuests([...data]),components:{Option:GuestsComponent}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(Label,{className:\"form-label\",for:\"location\",children:\"Keywords\"}),/*#__PURE__*/_jsx(Input,{id:\"location\",value:location,onChange:e=>setLocation(e.target.value),placeholder:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(Label,{className:\"form-label\",for:\"description\",children:\"Ad Copy\"}),/*#__PURE__*/_jsx(Input,{type:\"textarea\",name:\"text\",id:\"description\",rows:\"3\",value:desc,onChange:e=>setDesc(e.target.value),placeholder:\"Place your Copy here\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex mb-1\",children:/*#__PURE__*/_jsx(EventActions,{})})]})})})]});};export default AddEventSidebar;","map":{"version":3,"sources":["/Users/jvledesma/Downloads/react-version/full-version/src/views/apps/book/AddEventSidebar.js"],"names":["Fragment","useState","Avatar","toast","Flatpickr","X","Check","Select","components","PerfectScrollbar","useForm","Controller","Button","Modal","ModalHeader","ModalBody","Label","Input","Form","selectThemeColors","isObjEmpty","img1","ToastComponent","title","icon","color","AddEventSidebar","props","open","store","dispatch","addEvent","calendarApi","selectEvent","updateEvent","removeEvent","refetchEvents","calendarsColor","handleAddEventSidebar","selectedEvent","control","setError","setValue","getValues","handleSubmit","formState","errors","defaultValues","url","setUrl","desc","setDesc","guests","setGuests","allDay","setAllDay","location","setLocation","endPicker","setEndPicker","Date","startPicker","setStartPicker","calendarLabel","setCalendarLabel","value","label","options","className","guestsOptions","avatar","OptionComponent","data","GuestsComponent","handleAddEvent","obj","start","end","display","extendedProps","calendar","length","undefined","success","autoClose","hideProgressBar","closeButton","handleResetInputValues","handleSelectedEvent","resolveLabel","description","updateEventInCalendar","updatedEventData","propsToUpdate","extendedPropsToUpdate","existingEvent","getEventById","id","index","propName","setProp","setDates","setExtendedProp","handleUpdateEvent","eventToUpdate","type","removeEventInCalendar","eventId","remove","handleDeleteEvent","error","EventActions","CloseBtn","wheelPropagation","field","Option","date","enableTime","dateFormat","e","target","checked"],"mappings":"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","sourcesContent":["// ** React Imports\r\nimport { Fragment, useState } from 'react'\r\n\r\n// ** Custom Components\r\nimport Avatar from '@components/avatar'\r\n\r\n// ** Third Party Components\r\nimport { toast } from 'react-toastify'\r\nimport Flatpickr from 'react-flatpickr'\r\nimport { X, Check } from 'react-feather'\r\nimport Select, { components } from 'react-select'\r\nimport PerfectScrollbar from 'react-perfect-scrollbar'\r\nimport { useForm, Controller } from 'react-hook-form'\r\n\r\n// ** Reactstrap Imports\r\nimport { Button, Modal, ModalHeader, ModalBody, Label, Input, Form } from 'reactstrap'\r\n\r\n// ** Utils\r\nimport { selectThemeColors, isObjEmpty } from '@utils'\r\n\r\n// ** Avatar Images\r\nimport img1 from '@src/assets/images/avatars/1-small.png'\r\n\r\n// ** Styles Imports\r\nimport '@styles/react/libs/react-select/_react-select.scss'\r\nimport '@styles/react/libs/flatpickr/flatpickr.scss'\r\n\r\n// ** Toast Component\r\nconst ToastComponent = ({ title, icon, color }) => (\r\n  <Fragment>\r\n    <div className='toastify-header pb-0'>\r\n      <div className='title-wrapper'>\r\n        <Avatar size='sm' color={color} icon={icon} />\r\n        <h6 className='toast-title'>{title}</h6>\r\n      </div>\r\n    </div>\r\n  </Fragment>\r\n)\r\n\r\nconst AddEventSidebar = props => {\r\n  // ** Props\r\n  const {\r\n    open,\r\n    store,\r\n    dispatch,\r\n    addEvent,\r\n    calendarApi,\r\n    selectEvent,\r\n    updateEvent,\r\n    removeEvent,\r\n    refetchEvents,\r\n    calendarsColor,\r\n    handleAddEventSidebar\r\n  } = props\r\n\r\n  // ** Vars & Hooks\r\n  const selectedEvent = store.selectedEvent,\r\n    {\r\n      control,\r\n      setError,\r\n      setValue,\r\n      getValues,\r\n      handleSubmit,\r\n      formState: { errors }\r\n    } = useForm({\r\n      defaultValues: { title: '' }\r\n    })\r\n\r\n  // ** States\r\n  const [url, setUrl] = useState('')\r\n  const [desc, setDesc] = useState('')\r\n  const [guests, setGuests] = useState({})\r\n  const [allDay, setAllDay] = useState(false)\r\n  const [location, setLocation] = useState('')\r\n  const [endPicker, setEndPicker] = useState(new Date())\r\n  const [startPicker, setStartPicker] = useState(new Date())\r\n  const [calendarLabel, setCalendarLabel] = useState([{ value: 'Billboards', label: 'Billboards.btc', color: 'primary' }])\r\n\r\n  // ** Select Options\r\n  const options = [\r\n    { value: 'Billboards', label: 'Billboards.btc', color: 'success', className: 'form-check-danger mb-1' },\r\n    { value: 'Times Sq', label: 'Times2.btc', color: 'success', className: 'form-check-info' },\r\n    { value: 'Screens', label: 'Screens.btc', color: 'primary', className: 'form-check-primary mb-1' },\r\n    { value: 'Agency', label: 'Agency.btc', color: 'primary', className: 'form-check-info' },\r\n    { value: 'Advertising', label: 'Advertising.btc', color: 'primary', className: 'form-check-info' },\r\n    { value: 'Direct Mail', label: 'Direct Mail.btc', color: 'info', className: 'form-check-info' },\r\n    { value: 'Panorama', label: 'Panorama.btc', color: 'primary', className: 'form-check-info' },\r\n    { value: 'Office', label: 'Office.btc', color: 'primary', className: 'form-check-warning mb-1' },\r\n    { value: 'Malls', label: 'Malls.btc', color: 'success', className: 'form-check-success mb-1' },\r\n    { value: 'Say', label: 'Say.btc', color: 'success', className: 'form-check-primary mb-1' },\r\n    { value: 'Stadium', label: 'Stadium.btc', color: 'info', className: 'form-check-info' },\r\n    { value: 'Gyms', label: 'Gyms.btc', color: 'info', className: 'form-check-info' },\r\n    { value: 'Classifieds', label: 'Classifieds.btc', color: 'primary', className: 'form-check-info' }\r\n  ]\r\n\r\n  const guestsOptions = [\r\n    { value: 'USA', label: 'USA', avatar: img1 },\r\n    { value: 'CAN', label: 'Canada', avatar: img1 },\r\n    { value: 'Global', label: 'Global', avatar: img1 }\r\n  ]\r\n\r\n  // ** Custom Select components\r\n  const OptionComponent = ({ data, ...props }) => {\r\n    return (\r\n      <components.Option {...props}>\r\n        <span className={`bullet bullet-${data.color} bullet-sm me-50`}></span>\r\n        {data.label}\r\n      </components.Option>\r\n    )\r\n  }\r\n\r\n  const GuestsComponent = ({ data, ...props }) => {\r\n    return (\r\n      <components.Option {...props}>\r\n        <div className='d-flex flex-wrap align-items-center'>\r\n          <div>{data.label}</div>\r\n        </div>\r\n      </components.Option>\r\n    )\r\n  }\r\n\r\n  // ** Adds New Ad\r\n  const handleAddEvent = () => {\r\n    const obj = {\r\n      title: getValues('title'),\r\n      start: startPicker,\r\n      end: endPicker,\r\n      allDay,\r\n      display: 'block',\r\n      extendedProps: {\r\n        calendar: calendarLabel[0].label,\r\n        url: url.length ? url : undefined,\r\n        guests: guests.length ? guests : undefined,\r\n        location: location.length ? location : undefined,\r\n        desc: desc.length ? desc : undefined\r\n      }\r\n    }\r\n    dispatch(addEvent(obj))\r\n    refetchEvents()\r\n    handleAddEventSidebar()\r\n    toast.success(<ToastComponent title='Ad Booked - Ready to Publish' color='success' icon={<Check />} />, {\r\n      icon: false,\r\n      autoClose: 2000,\r\n      hideProgressBar: true,\r\n      closeButton: false\r\n    })\r\n  }\r\n\r\n  // ** Reset Input Values on Close\r\n  const handleResetInputValues = () => {\r\n    dispatch(selectEvent({}))\r\n    setValue('title', '')\r\n    setAllDay(false)\r\n    setUrl('')\r\n    setLocation('')\r\n    setDesc('')\r\n    setGuests({})\r\n    setCalendarLabel([{ value: 'Billboards', label: 'Billboards.btc', color: 'primary' }])\r\n    setStartPicker(new Date())\r\n    setEndPicker(new Date())\r\n  }\r\n\r\n  // ** Set sidebar fields\r\n  const handleSelectedEvent = () => {\r\n    if (!isObjEmpty(selectedEvent)) {\r\n      const calendar = selectedEvent.extendedProps.calendar\r\n\r\n      const resolveLabel = () => {\r\n        if (calendar.length) {\r\n          return { label: calendar, value: calendar, color: calendarsColor[calendar] }\r\n        } else {\r\n          return { value: 'Billboards', label: 'Billboards.btc', color: 'primary' }\r\n        }\r\n      }\r\n      setValue('title', selectedEvent.title || getValues('title'))\r\n      setAllDay(selectedEvent.allDay || allDay)\r\n      setUrl(selectedEvent.url || url)\r\n      setLocation(selectedEvent.extendedProps.location || location)\r\n      setDesc(selectedEvent.extendedProps.description || desc)\r\n      setGuests(selectedEvent.extendedProps.guests || guests)\r\n      setStartPicker(new Date(selectedEvent.start))\r\n      setEndPicker(selectedEvent.allDay ? new Date(selectedEvent.start) : new Date(selectedEvent.end))\r\n      setCalendarLabel([resolveLabel()])\r\n    }\r\n  }\r\n\r\n  // ** (UI) updateEventInCalendar\r\n  const updateEventInCalendar = (updatedEventData, propsToUpdate, extendedPropsToUpdate) => {\r\n    const existingEvent = calendarApi.getEventById(updatedEventData.id)\r\n\r\n    // ** Set ad properties except date related\r\n    for (let index = 0; index < propsToUpdate.length; index++) {\r\n      const propName = propsToUpdate[index]\r\n      existingEvent.setProp(propName, updatedEventData[propName])\r\n    }\r\n\r\n    // ** Set date related props\r\n    existingEvent.setDates(new Date(updatedEventData.start), new Date(updatedEventData.end), {\r\n      allDay: updatedEventData.allDay\r\n    })\r\n\r\n    // ** Set ad's extendedProps\r\n     for (let index = 0; index < extendedPropsToUpdate.length; index++) {\r\n      const propName = extendedPropsToUpdate[index]\r\n      existingEvent.setExtendedProp(propName, updatedEventData.extendedProps[propName])\r\n    }\r\n  }\r\n\r\n  // ** Updates Ads in Store\r\n  const handleUpdateEvent = () => {\r\n    if (getValues('title').length) {\r\n      const eventToUpdate = {\r\n        id: selectedEvent.id,\r\n        title: getValues('title'),\r\n        allDay,\r\n        start: startPicker,\r\n        end: endPicker,\r\n        url,\r\n        display: allDay === false ? 'block' : undefined,\r\n        extendedProps: {\r\n          location,\r\n          description: desc,\r\n          guests,\r\n          calendar: calendarLabel[0].label\r\n        }\r\n      }\r\n\r\n      const propsToUpdate = ['id', 'title', 'url']\r\n      const extendedPropsToUpdate = ['calendar', 'guests', 'location', 'description']\r\n      dispatch(updateEvent(eventToUpdate))\r\n      updateEventInCalendar(eventToUpdate, propsToUpdate, extendedPropsToUpdate)\r\n\r\n      handleAddEventSidebar()\r\n      toast.success(<ToastComponent title='Ad Updated' color='success' icon={<Check />} />, {\r\n        icon: false,\r\n        autoClose: 2000,\r\n        hideProgressBar: true,\r\n        closeButton: false\r\n      })\r\n    } else {\r\n      setError('title', {\r\n        type: 'manual'\r\n      })\r\n    }\r\n  }\r\n\r\n  // ** (UI) removeEventInCalendar\r\n  const removeEventInCalendar = eventId => {\r\n    calendarApi.getEventById(eventId).remove()\r\n  }\r\n\r\n  const handleDeleteEvent = () => {\r\n    dispatch(removeEvent(selectedEvent.id))\r\n    removeEventInCalendar(selectedEvent.id)\r\n    handleAddEventSidebar()\r\n    toast.error(<ToastComponent title='Ad Removed' color='danger' icon={<Trash />} />, {\r\n      icon: false,\r\n      autoClose: 2000,\r\n      hideProgressBar: true,\r\n      closeButton: false\r\n    })\r\n  }\r\n\r\n  // ** Event Action buttons\r\n  const EventActions = () => {\r\n    if (isObjEmpty(selectedEvent) || (!isObjEmpty(selectedEvent) && !selectedEvent.title.length)) {\r\n      return (\r\n        <Fragment>\r\n          <Button className='me-1' type='submit' color='primary'>\r\n            Add\r\n          </Button>\r\n          <Button color='secondary' type='reset' onClick={handleAddEventSidebar} outline>\r\n            Cancel\r\n          </Button>\r\n        </Fragment>\r\n      )\r\n    } else {\r\n      return (\r\n        <Fragment>\r\n          <Button className='me-1' color='primary' onClick={handleUpdateEvent}>\r\n            Update\r\n          </Button>\r\n          <Button color='danger' onClick={handleDeleteEvent} outline>\r\n            Delete\r\n          </Button>\r\n        </Fragment>\r\n      )\r\n    }\r\n  }\r\n\r\n  // ** Close BTN\r\n  const CloseBtn = <X className='cursor-pointer' size={15} onClick={handleAddEventSidebar} />\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={open}\r\n      className='sidebar-lg'\r\n      toggle={handleAddEventSidebar}\r\n      onOpened={handleSelectedEvent}\r\n      onClosed={handleResetInputValues}\r\n      contentClassName='p-0 overflow-hidden'\r\n      modalClassName='modal-slide-in event-sidebar'\r\n    >\r\n      <ModalHeader className='mb-1' toggle={handleAddEventSidebar} close={CloseBtn} tag='div'>\r\n        <h5 className='modal-title'>\r\n          {selectedEvent && selectedEvent.title && selectedEvent.title.length ? 'Update' : 'Book'} Ad\r\n        </h5>\r\n      </ModalHeader>\r\n      <PerfectScrollbar options={{ wheelPropagation: false }}>\r\n        <ModalBody className='flex-grow-1 pb-sm-0 pb-3'>\r\n          <Form\r\n            onSubmit={handleSubmit(data => {\r\n              if (data.title.length) {\r\n                if (isObjEmpty(errors)) {\r\n                  if (isObjEmpty(selectedEvent) || (!isObjEmpty(selectedEvent) && !selectedEvent.title.length)) {\r\n                    handleAddEvent()\r\n                  } else {\r\n                    handleUpdateEvent()\r\n                  }\r\n                  handleAddEventSidebar()\r\n                }\r\n              } else {\r\n                setError('title', {\r\n                  type: 'manual'\r\n                })\r\n              }\r\n            })}\r\n          >\r\n            <div className='mb-1'>\r\n              <Label className='form-label' for='title'>\r\n                Title <span className='text-danger'>*</span>\r\n              </Label>\r\n              <Controller\r\n                name='title'\r\n                control={control}\r\n                render={({ field }) => (\r\n                  <Input id='title' placeholder='Title' invalid={errors.title && true} {...field} />\r\n                )}\r\n              />\r\n            </div>\r\n\r\n            <div className='mb-1'>\r\n              <Label className='form-label' for='label'>\r\n                Distribution Network\r\n              </Label>\r\n              <Select\r\n                id='label'\r\n                value={calendarLabel}\r\n                options={options}\r\n                theme={selectThemeColors}\r\n                className='react-select'\r\n                classNamePrefix='select'\r\n                isClearable={false}\r\n                onChange={data => setCalendarLabel([data])}\r\n                components={{\r\n                  Option: OptionComponent\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className='mb-1'>\r\n              <Label className='form-label' for='startDate'>\r\n                Start Date\r\n              </Label>\r\n              <Flatpickr\r\n                required\r\n                id='startDate'\r\n                name='startDate'\r\n                className='form-control'\r\n                onChange={date => setStartPicker(date[0])}\r\n                value={startPicker}\r\n                options={{\r\n                  enableTime: allDay === false,\r\n                  dateFormat: 'Y-m-d H:i'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className='mb-1'>\r\n              <Label className='form-label' for='endDate'>\r\n                End Date\r\n              </Label>\r\n              <Flatpickr\r\n                required\r\n                id='endDate'\r\n                // tag={Flatpickr}\r\n                name='endDate'\r\n                className='form-control'\r\n                onChange={date => setEndPicker(date[0])}\r\n                value={endPicker}\r\n                options={{\r\n                  enableTime: allDay === false,\r\n                  dateFormat: 'Y-m-d H:i'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className='form-switch mb-1'>\r\n              <Input\r\n                id='allDay'\r\n                type='switch'\r\n                className='me-1'\r\n                checked={allDay}\r\n                name='customSwitch'\r\n                onChange={e => setAllDay(e.target.checked)}\r\n              />\r\n              <Label className='form-label' for='allDay'>\r\n                All Day\r\n              </Label>\r\n            </div>\r\n\r\n            <div className='mb-1'>\r\n              <Label className='form-label' for='eventURL'>\r\n                URL for the Art (PNG, JPG, SVG, HTML)\r\n                (TIFF only available for Agency Networks)\r\n              </Label>\r\n              <Input\r\n                type='url'\r\n                id='eventURL'\r\n                value={url}\r\n                onChange={e => setUrl(e.target.value)}\r\n                placeholder='https://www.bitfari.org'\r\n              />\r\n            </div>\r\n\r\n            <div className='mb-1'>\r\n              <Label className='form-label' for='guests'>\r\n                Choose a Location\r\n              </Label>\r\n              <Select\r\n                isMulti\r\n                id='guests'\r\n                className='react-select'\r\n                classNamePrefix='select'\r\n                isClearable={false}\r\n                options={guestsOptions}\r\n                theme={selectThemeColors}\r\n                value={guests.length ? [...guests] : null}\r\n                onChange={data => setGuests([...data])}\r\n                components={{\r\n                  Option: GuestsComponent\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className='mb-1'>\r\n              <Label className='form-label' for='location'>\r\n                Keywords\r\n              </Label>\r\n              <Input id='location' value={location} onChange={e => setLocation(e.target.value)} placeholder='' />\r\n            </div>\r\n\r\n            <div className='mb-1'>\r\n              <Label className='form-label' for='description'>\r\n                Ad Copy\r\n              </Label>\r\n              <Input\r\n                type='textarea'\r\n                name='text'\r\n                id='description'\r\n                rows='3'\r\n                value={desc}\r\n                onChange={e => setDesc(e.target.value)}\r\n                placeholder='Place your Copy here'\r\n              />\r\n            </div>\r\n            <div className='d-flex mb-1'>\r\n              <EventActions />\r\n            </div>\r\n          </Form>\r\n        </ModalBody>\r\n      </PerfectScrollbar>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default AddEventSidebar"]},"metadata":{},"sourceType":"module"}