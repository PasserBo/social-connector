{"ast":null,"code":"import _asyncToGenerator from\"/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/node_modules/@babel/runtime/regenerator/index.js\";// ** Redux Imports\nimport{createSlice,createAsyncThunk}from'@reduxjs/toolkit';// ** Axios Imports\nimport axios from'axios';export var getMails=createAsyncThunk('appEmail/getMails',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(params){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/apps/email/emails',{params:params});case 2:response=_context.sent;return _context.abrupt(\"return\",{params:params,data:response.data});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var updateMails=createAsyncThunk('appEmail/updateMails',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2,_ref3){var emailIds,dataToUpdate,dispatch,getState,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:emailIds=_ref2.emailIds,dataToUpdate=_ref2.dataToUpdate;dispatch=_ref3.dispatch,getState=_ref3.getState;_context2.next=4;return axios.post('/apps/email/update-emails',{emailIds:emailIds,dataToUpdate:dataToUpdate});case 4:response=_context2.sent;_context2.next=7;return dispatch(getMails(getState().email.params));case 7:return _context2.abrupt(\"return\",{emailIds:emailIds,dataToUpdate:dataToUpdate,data:response.data});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref4.apply(this,arguments);};}());export var updateMailLabel=createAsyncThunk('appEmail/updateMailLabel',/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref5,_ref6){var emailIds,label,dispatch,getState,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:emailIds=_ref5.emailIds,label=_ref5.label;dispatch=_ref6.dispatch,getState=_ref6.getState;_context3.next=4;return axios.post('/apps/email/update-emails-label',{emailIds:emailIds,label:label});case 4:response=_context3.sent;_context3.next=7;return dispatch(getMails(getState().email.params));case 7:return _context3.abrupt(\"return\",response.data);case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4,_x5){return _ref7.apply(this,arguments);};}());export var paginateMail=createAsyncThunk('appEmail/paginateMail',/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref8){var dir,emailId,response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dir=_ref8.dir,emailId=_ref8.emailId;_context4.next=3;return axios.get('/apps/email/paginate-email',{params:{dir:dir,emailId:emailId}});case 3:response=_context4.sent;return _context4.abrupt(\"return\",response.data);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x6){return _ref9.apply(this,arguments);};}());export var selectCurrentMail=createAsyncThunk('appEmail/selectCurrentMail',/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.get('/apps/email/get-email',{id:id});case 2:response=_context5.sent;return _context5.abrupt(\"return\",response.data);case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x7){return _ref10.apply(this,arguments);};}());export var appEmailSlice=createSlice({name:'appEmail',initialState:{mails:[],params:{},emailsMeta:{},selectedMails:[],currentMail:null},reducers:{selectMail:function selectMail(state,action){var selectedMails=state.selectedMails;if(!selectedMails.includes(action.payload)){selectedMails.push(action.payload);}else{selectedMails.splice(selectedMails.indexOf(action.payload),1);}state.selectedMails=selectedMails;},selectAllMail:function selectAllMail(state,action){var selectAllMailsArr=[];if(action.payload){selectAllMailsArr.length=0;state.mails.forEach(function(mail){return selectAllMailsArr.push(mail.id);});}else{selectAllMailsArr.length=0;}state.selectedMails=selectAllMailsArr;},resetSelectedMail:function resetSelectedMail(state){state.selectedMails=[];}},extraReducers:function extraReducers(builder){builder.addCase(getMails.fulfilled,function(state,action){var currMail=null;if(state.currentMail!==null&&state.currentMail!==undefined){currMail=action.payload.data.emails.find(function(i){return i.id===state.currentMail.id;});}state.currentMail=currMail;state.params=action.payload.params;state.mails=action.payload.data.emails;state.emailsMeta=action.payload.data.emailsMeta;}).addCase(updateMails.fulfilled,function(state,action){function updateMailData(email){Object.assign(email,action.payload.dataToUpdate);}state.mails.forEach(function(email){if(action.payload.emailIds.includes(email.id)){updateMailData(email);}});}).addCase(paginateMail.fulfilled,function(state,action){var data=action.payload;var dataIndex=state.mails.findIndex(function(i){return i.id===data.id;});dataIndex===0?data.hasPreviousMail=false:data.hasPreviousMail=true;dataIndex===state.mails.length-1?data.hasNextMail=false:data.hasNextMail=true;state.currentMail=data;}).addCase(selectCurrentMail.fulfilled,function(state,action){state.currentMail=action.payload;});}});var _appEmailSlice$action=appEmailSlice.actions,selectMail=_appEmailSlice$action.selectMail,selectAllMail=_appEmailSlice$action.selectAllMail,resetSelectedMail=_appEmailSlice$action.resetSelectedMail;export{selectMail,selectAllMail,resetSelectedMail};export default appEmailSlice.reducer;","map":{"version":3,"sources":["/Users/jvledesma/Downloads/vuexy-admin-v8.0.0/react-version/Bootstrap5/full-version/src/views/apps/email/store/index.js"],"names":["createSlice","createAsyncThunk","axios","getMails","params","get","response","data","updateMails","emailIds","dataToUpdate","dispatch","getState","post","email","updateMailLabel","label","paginateMail","dir","emailId","selectCurrentMail","id","appEmailSlice","name","initialState","mails","emailsMeta","selectedMails","currentMail","reducers","selectMail","state","action","includes","payload","push","splice","indexOf","selectAllMail","selectAllMailsArr","length","forEach","mail","resetSelectedMail","extraReducers","builder","addCase","fulfilled","currMail","undefined","emails","find","i","updateMailData","Object","assign","dataIndex","findIndex","hasPreviousMail","hasNextMail","actions","reducer"],"mappings":"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","sourcesContent":["// ** Redux Imports\r\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\n\r\n// ** Axios Imports\r\nimport axios from 'axios'\r\n\r\nexport const getMails = createAsyncThunk('appEmail/getMails', async params => {\r\n  const response = await axios.get('/apps/email/emails', { params })\r\n  return {\r\n    params,\r\n    data: response.data\r\n  }\r\n})\r\n\r\nexport const updateMails = createAsyncThunk(\r\n  'appEmail/updateMails',\r\n  async ({ emailIds, dataToUpdate }, { dispatch, getState }) => {\r\n    const response = await axios.post('/apps/email/update-emails', { emailIds, dataToUpdate })\r\n    await dispatch(getMails(getState().email.params))\r\n    return {\r\n      emailIds,\r\n      dataToUpdate,\r\n      data: response.data\r\n    }\r\n  }\r\n)\r\n\r\nexport const updateMailLabel = createAsyncThunk(\r\n  'appEmail/updateMailLabel',\r\n  async ({ emailIds, label }, { dispatch, getState }) => {\r\n    const response = await axios.post('/apps/email/update-emails-label', { emailIds, label })\r\n    await dispatch(getMails(getState().email.params))\r\n    return response.data\r\n  }\r\n)\r\n\r\nexport const paginateMail = createAsyncThunk('appEmail/paginateMail', async ({ dir, emailId }) => {\r\n  const response = await axios.get('/apps/email/paginate-email', { params: { dir, emailId } })\r\n  return response.data\r\n})\r\n\r\nexport const selectCurrentMail = createAsyncThunk('appEmail/selectCurrentMail', async id => {\r\n  const response = await axios.get('/apps/email/get-email', { id })\r\n  return response.data\r\n})\r\n\r\nexport const appEmailSlice = createSlice({\r\n  name: 'appEmail',\r\n  initialState: {\r\n    mails: [],\r\n    params: {},\r\n    emailsMeta: {},\r\n    selectedMails: [],\r\n    currentMail: null\r\n  },\r\n  reducers: {\r\n    selectMail: (state, action) => {\r\n      const selectedMails = state.selectedMails\r\n      if (!selectedMails.includes(action.payload)) {\r\n        selectedMails.push(action.payload)\r\n      } else {\r\n        selectedMails.splice(selectedMails.indexOf(action.payload), 1)\r\n      }\r\n      state.selectedMails = selectedMails\r\n    },\r\n    selectAllMail: (state, action) => {\r\n      const selectAllMailsArr = []\r\n      if (action.payload) {\r\n        selectAllMailsArr.length = 0\r\n        state.mails.forEach(mail => selectAllMailsArr.push(mail.id))\r\n      } else {\r\n        selectAllMailsArr.length = 0\r\n      }\r\n      state.selectedMails = selectAllMailsArr\r\n    },\r\n    resetSelectedMail: state => {\r\n      state.selectedMails = []\r\n    }\r\n  },\r\n  extraReducers: builder => {\r\n    builder\r\n      .addCase(getMails.fulfilled, (state, action) => {\r\n        let currMail = null\r\n        if (state.currentMail !== null && state.currentMail !== undefined) {\r\n          currMail = action.payload.data.emails.find(i => i.id === state.currentMail.id)\r\n        }\r\n        state.currentMail = currMail\r\n        state.params = action.payload.params\r\n        state.mails = action.payload.data.emails\r\n        state.emailsMeta = action.payload.data.emailsMeta\r\n      })\r\n      .addCase(updateMails.fulfilled, (state, action) => {\r\n        function updateMailData(email) {\r\n          Object.assign(email, action.payload.dataToUpdate)\r\n        }\r\n        state.mails.forEach(email => {\r\n          if (action.payload.emailIds.includes(email.id)) {\r\n            updateMailData(email)\r\n          }\r\n        })\r\n      })\r\n      .addCase(paginateMail.fulfilled, (state, action) => {\r\n        const data = action.payload\r\n        const dataIndex = state.mails.findIndex(i => i.id === data.id)\r\n        dataIndex === 0 ? (data.hasPreviousMail = false) : (data.hasPreviousMail = true)\r\n        dataIndex === state.mails.length - 1 ? (data.hasNextMail = false) : (data.hasNextMail = true)\r\n        state.currentMail = data\r\n      })\r\n      .addCase(selectCurrentMail.fulfilled, (state, action) => {\r\n        state.currentMail = action.payload\r\n      })\r\n  }\r\n})\r\n\r\nexport const { selectMail, selectAllMail, resetSelectedMail } = appEmailSlice.actions\r\n\r\nexport default appEmailSlice.reducer\r\n"]},"metadata":{},"sourceType":"module"}