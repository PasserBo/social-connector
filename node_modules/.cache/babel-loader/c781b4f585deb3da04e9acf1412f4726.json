{"ast":null,"code":"// ** React Imports\nimport{useContext}from'react';import{AbilityContext}from'@src/utility/context/Can';/**\r\n * Return which component to render based on it's data/context\r\n * @param {Object} item nav menu item\r\n */export const resolveVerticalNavMenuItemComponent=item=>{if(item.header)return'VerticalNavMenuSectionHeader';if(item.children)return'VerticalNavMenuGroup';return'VerticalNavMenuLink';};/**\r\n * Return which component to render based on it's data/context\r\n * @param {Object} item nav menu item\r\n */export const resolveHorizontalNavMenuItemComponent=item=>{if(item.children)return'HorizontalNavMenuGroup';return'HorizontalNavMenuLink';};/**\r\n * Check if nav-link is active\r\n * @param {Object} link nav-link object\r\n */export const isNavLinkActive=(link,currentURL,routerProps)=>{return currentURL===link||routerProps&&routerProps.meta&&routerProps.meta.navLink&&routerProps.meta.navLink===link;// return currentURL === link\n};/**\r\n * Check if the given item has the given url\r\n * in one of its children\r\n *\r\n * @param item\r\n * @param activeItem\r\n */export const hasActiveChild=(item,currentUrl)=>{const{children}=item;if(!children){return false;}for(const child of children){if(child.children){if(hasActiveChild(child,currentUrl)){return true;}}// Check if the child has a link and is active\nif(child&&child.navLink&&currentUrl&&(child.navLink===currentUrl||currentUrl.includes(child.navLink))){return true;}}return false;};/**\r\n * Check if this is a children\r\n * of the given item\r\n *\r\n * @param children\r\n * @param openGroup\r\n * @param currentActiveGroup\r\n */export const removeChildren=(children,openGroup,currentActiveGroup)=>{children.forEach(child=>{if(!currentActiveGroup.includes(child.id)){const index=openGroup.indexOf(child.id);if(index>-1)openGroup.splice(index,1);if(child.children)removeChildren(child.children,openGroup,currentActiveGroup);}});};export const canViewMenuGroup=item=>{const ability=useContext(AbilityContext);// ! This same logic is used in canViewHorizontalNavMenuGroup and canViewHorizontalNavMenuHeaderGroup. So make sure to update logic in them as well\nconst hasAnyVisibleChild=item.children&&item.children.some(i=>ability.can(i.action,i.resource));// ** If resource and action is defined in item => Return based on children visibility (Hide group if no child is visible)\n// ** Else check for ability using provided resource and action along with checking if has any visible child\nif(!(item.action&&item.resource)){return hasAnyVisibleChild;}return ability.can(item.action,item.resource)&&hasAnyVisibleChild;};export const canViewMenuItem=item=>{const ability=useContext(AbilityContext);return ability.can(item.action,item.resource);};","map":{"version":3,"sources":["/Users/jvledesma/Downloads/bitfari-dev/www/src/@core/layouts/utils.js"],"names":["useContext","AbilityContext","resolveVerticalNavMenuItemComponent","item","header","children","resolveHorizontalNavMenuItemComponent","isNavLinkActive","link","currentURL","routerProps","meta","navLink","hasActiveChild","currentUrl","child","includes","removeChildren","openGroup","currentActiveGroup","forEach","id","index","indexOf","splice","canViewMenuGroup","ability","hasAnyVisibleChild","some","i","can","action","resource","canViewMenuItem"],"mappings":"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","sourcesContent":["// ** React Imports\r\nimport { useContext } from 'react'\r\nimport { AbilityContext } from '@src/utility/context/Can'\r\n\r\n/**\r\n * Return which component to render based on it's data/context\r\n * @param {Object} item nav menu item\r\n */\r\nexport const resolveVerticalNavMenuItemComponent = item => {\r\n  if (item.header) return 'VerticalNavMenuSectionHeader'\r\n  if (item.children) return 'VerticalNavMenuGroup'\r\n  return 'VerticalNavMenuLink'\r\n}\r\n\r\n/**\r\n * Return which component to render based on it's data/context\r\n * @param {Object} item nav menu item\r\n */\r\nexport const resolveHorizontalNavMenuItemComponent = item => {\r\n  if (item.children) return 'HorizontalNavMenuGroup'\r\n  return 'HorizontalNavMenuLink'\r\n}\r\n\r\n/**\r\n * Check if nav-link is active\r\n * @param {Object} link nav-link object\r\n */\r\nexport const isNavLinkActive = (link, currentURL, routerProps) => {\r\n  return (\r\n    currentURL === link ||\r\n    (routerProps && routerProps.meta && routerProps.meta.navLink && routerProps.meta.navLink === link)\r\n  )\r\n  // return currentURL === link\r\n}\r\n\r\n/**\r\n * Check if the given item has the given url\r\n * in one of its children\r\n *\r\n * @param item\r\n * @param activeItem\r\n */\r\nexport const hasActiveChild = (item, currentUrl) => {\r\n  const { children } = item\r\n\r\n  if (!children) {\r\n    return false\r\n  }\r\n\r\n  for (const child of children) {\r\n    if (child.children) {\r\n      if (hasActiveChild(child, currentUrl)) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    // Check if the child has a link and is active\r\n    if (child && child.navLink && currentUrl && (child.navLink === currentUrl || currentUrl.includes(child.navLink))) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n/**\r\n * Check if this is a children\r\n * of the given item\r\n *\r\n * @param children\r\n * @param openGroup\r\n * @param currentActiveGroup\r\n */\r\nexport const removeChildren = (children, openGroup, currentActiveGroup) => {\r\n  children.forEach(child => {\r\n    if (!currentActiveGroup.includes(child.id)) {\r\n      const index = openGroup.indexOf(child.id)\r\n      if (index > -1) openGroup.splice(index, 1)\r\n      if (child.children) removeChildren(child.children, openGroup, currentActiveGroup)\r\n    }\r\n  })\r\n}\r\n\r\nexport const canViewMenuGroup = item => {\r\n  const ability = useContext(AbilityContext)\r\n  // ! This same logic is used in canViewHorizontalNavMenuGroup and canViewHorizontalNavMenuHeaderGroup. So make sure to update logic in them as well\r\n  const hasAnyVisibleChild = item.children && item.children.some(i => ability.can(i.action, i.resource))\r\n\r\n  // ** If resource and action is defined in item => Return based on children visibility (Hide group if no child is visible)\r\n  // ** Else check for ability using provided resource and action along with checking if has any visible child\r\n  if (!(item.action && item.resource)) {\r\n    return hasAnyVisibleChild\r\n  }\r\n  return ability.can(item.action, item.resource) && hasAnyVisibleChild\r\n}\r\n\r\nexport const canViewMenuItem = item => {\r\n  const ability = useContext(AbilityContext)\r\n  return ability.can(item.action, item.resource)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}