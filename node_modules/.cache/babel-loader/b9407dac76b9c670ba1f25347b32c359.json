{"ast":null,"code":"/*eslint-disable */import mock from'../mock';const date=new Date();const nextDay=new Date(new Date().getTime()+24*60*60*1000);// prettier-ignore\nconst nextMonth=date.getMonth()===11?new Date(date.getFullYear()+1,0,1):new Date(date.getFullYear(),date.getMonth()+1,1);// prettier-ignore\nconst prevMonth=date.getMonth()===11?new Date(date.getFullYear()-1,0,1):new Date(date.getFullYear(),date.getMonth()-1,1);const data={events:[]};// ------------------------------------------------\n// GET: Return calendar events\n// ------------------------------------------------\nmock.onGet('/apps/book/events').reply(config=>{// Get requested calendars as Array\nconst calendars=config.calendars;return[200,data.events.filter(event=>calendars.includes(event.extendedProps.calendar))];});// ------------------------------------------------\n// POST: Add new event\n// ------------------------------------------------\nmock.onPost('/apps/book/add-event').reply(config=>{// Get event from post data\nconst{event}=JSON.parse(config.data);const{length}=data.events;let lastIndex=0;if(length){lastIndex=data.events[length-1].id;}event.id=lastIndex+1;data.events.push(event);return[201,{event}];});// ------------------------------------------------\n// POST: Update Event\n// ------------------------------------------------\nmock.onPost('/apps/book/update-event').reply(config=>{const{event:eventData}=JSON.parse(config.data);// Convert Id to number\neventData.id=Number(eventData.id);const event=data.events.find(ev=>ev.id===Number(eventData.id));Object.assign(event,eventData);return[200,{event}];});// ------------------------------------------------\n// DELETE: Remove Event\n// ------------------------------------------------\nmock.onDelete('/apps/book/remove-event').reply(config=>{// Get event id from URL\nlet{id}=config;// Convert Id to number\nconst eventId=Number(id);const eventIndex=data.events.findIndex(ev=>ev.id===eventId);data.events.splice(eventIndex,1);return[200];});","map":{"version":3,"sources":["/Users/jvledesma/www-bitfari/src/@local-db/apps/book.js"],"names":["mock","date","Date","nextDay","getTime","nextMonth","getMonth","getFullYear","prevMonth","data","events","onGet","reply","config","calendars","filter","event","includes","extendedProps","calendar","onPost","JSON","parse","length","lastIndex","id","push","eventData","Number","find","ev","Object","assign","onDelete","eventId","eventIndex","findIndex","splice"],"mappings":"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","sourcesContent":["/*eslint-disable */\nimport mock from '../mock'\n\nconst date = new Date()\nconst nextDay = new Date(new Date().getTime() + 24 * 60 * 60 * 1000)\n\n// prettier-ignore\nconst nextMonth = date.getMonth() === 11 ? new Date(date.getFullYear() + 1, 0, 1) : new Date(date.getFullYear(), date.getMonth() + 1, 1)\n// prettier-ignore\nconst prevMonth = date.getMonth() === 11 ? new Date(date.getFullYear() - 1, 0, 1) : new Date(date.getFullYear(), date.getMonth() - 1, 1)\n\nconst data = {\n  events: [\n\n  ]\n}\n\n// ------------------------------------------------\n// GET: Return calendar events\n// ------------------------------------------------\nmock.onGet('/apps/book/events').reply(config => {\n  // Get requested calendars as Array\n  const calendars = config.calendars\n\n  return [200, data.events.filter(event => calendars.includes(event.extendedProps.calendar))]\n})\n\n// ------------------------------------------------\n// POST: Add new event\n// ------------------------------------------------\nmock.onPost('/apps/book/add-event').reply(config => {\n  // Get event from post data\n  const { event } = JSON.parse(config.data)\n\n  const { length } = data.events\n  let lastIndex = 0\n  if (length) {\n    lastIndex = data.events[length - 1].id\n  }\n  event.id = lastIndex + 1\n\n  data.events.push(event)\n\n  return [201, { event }]\n})\n\n// ------------------------------------------------\n// POST: Update Event\n// ------------------------------------------------\nmock.onPost('/apps/book/update-event').reply(config => {\n  const { event: eventData } = JSON.parse(config.data)\n\n  // Convert Id to number\n  eventData.id = Number(eventData.id)\n\n  const event = data.events.find(ev => ev.id === Number(eventData.id))\n  Object.assign(event, eventData)\n\n  return [200, { event }]\n})\n\n// ------------------------------------------------\n// DELETE: Remove Event\n// ------------------------------------------------\nmock.onDelete('/apps/book/remove-event').reply(config => {\n  // Get event id from URL\n  let { id } = config\n\n  // Convert Id to number\n  const eventId = Number(id)\n\n  const eventIndex = data.events.findIndex(ev => ev.id === eventId)\n  data.events.splice(eventIndex, 1)\n  return [200]\n})\n"]},"metadata":{},"sourceType":"module"}