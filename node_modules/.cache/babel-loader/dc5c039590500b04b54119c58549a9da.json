{"ast":null,"code":"// ** React Imports\nimport{useState,Fragment}from'react';// ** Third Party Components\nimport classnames from'classnames';import Flatpickr from'react-flatpickr';import{Editor}from'react-draft-wysiwyg';import{X,Star,Trash}from'react-feather';import Select,{components}from'react-select';import{useForm,Controller}from'react-hook-form';import{EditorState,ContentState}from'draft-js';// ** Reactstrap Imports\nimport{Modal,ModalBody,Button,Form,Input,Label,FormFeedback}from'reactstrap';// ** Utils\nimport{isObjEmpty,selectThemeColors}from'@utils';// ** Styles Imports\nimport'@styles/react/libs/editor/editor.scss';import'@styles/react/libs/flatpickr/flatpickr.scss';import'@styles/react/libs/react-select/_react-select.scss';// ** Function to capitalize the first letter of string\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const capitalize=string=>string.charAt(0).toUpperCase()+string.slice(1);// ** Modal Header\nconst ModalHeader=props=>{// ** Props\nconst{children,store,handleTaskSidebar,setDeleted,deleted,important,setImportant,deleteTask,dispatch}=props;// ** Function to delete task\nconst handleDeleteTask=()=>{setDeleted(!deleted);dispatch(deleteTask(store.selectedTask.id));handleTaskSidebar();};return/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header d-flex align-items-center justify-content-between mb-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:children}),/*#__PURE__*/_jsxs(\"div\",{className:\"todo-item-action d-flex align-items-center\",children:[store&&!isObjEmpty(store.selectedTask)?/*#__PURE__*/_jsx(Trash,{className:\"cursor-pointer mt-25\",size:16,onClick:()=>handleDeleteTask()}):null,/*#__PURE__*/_jsx(\"span\",{className:\"todo-item-favorite cursor-pointer mx-75\",children:/*#__PURE__*/_jsx(Star,{size:16,onClick:()=>setImportant(!important),className:classnames({'text-warning':important===true})})}),/*#__PURE__*/_jsx(X,{className:\"fw-normal mt-25\",size:16,onClick:handleTaskSidebar})]})]});};const TaskSidebar=props=>{// ** Props\nconst{open,handleTaskSidebar,store,dispatch,updateTask,selectTask,addTask,deleteTask}=props;// ** States\nconst[tags,setTags]=useState([]);const[desc,setDesc]=useState(EditorState.createEmpty());const[completed,setCompleted]=useState(false);const[important,setImportant]=useState(false);const[deleted,setDeleted]=useState(false);const[dueDate,setDueDate]=useState(new Date());const{control,setError,setValue,handleSubmit,formState:{errors}}=useForm({defaultValues:{title:''}});// ** Tag Select Options\nconst tagOptions=[{value:'family',label:'Family'},{value:'local',label:'Local'},{value:'business',label:'Business'},{value:'info',label:'Information'},{value:'shopping',label:'Shopping'}];// ** Custom Assignee Component\nconst AssigneeComponent=_ref=>{let{data,...props}=_ref;return/*#__PURE__*/_jsx(components.Option,{...props,children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"d-block rounded-circle me-50\",src:data.img,height:\"26\",width:\"26\",alt:data.label}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:data.label})]})});};// ** Returns sidebar title\nconst handleSidebarTitle=()=>{if(store&&!isObjEmpty(store.selectedTask)){return/*#__PURE__*/_jsx(Button,{outline:true,size:\"sm\",onClick:()=>setCompleted(!completed),color:completed===true?'success':'secondary',children:completed===true?'Completed':'Mark Completed'});}else{return'Add Goal';}};// ** Function to run when sidebar opens\nconst handleSidebarOpened=()=>{const{selectedTask}=store;if(!isObjEmpty(selectedTask)){setValue('title',selectedTask.title);setCompleted(selectedTask.isCompleted);setImportant(selectedTask.isImportant);setDueDate(selectedTask.dueDate);if(typeof selectedTask.description==='string'){setDesc(EditorState.createWithContent(ContentState.createFromText(selectedTask.description)));}else{const obj=selectedTask.description._immutable.currentContent.blockMap;const property=Object.keys(obj).map(val=>val);setDesc(EditorState.createWithContent(ContentState.createFromText(obj[property].text)));}if(selectedTask.tags.length){const tags=[];selectedTask.tags.map(tag=>{tags.push({value:tag,label:capitalize(tag)});});setTags(tags);}}};// ** Function to run when sidebar closes\nconst handleSidebarClosed=()=>{setTags([]);setDesc('');setValue('title','');setCompleted(false);setImportant(false);setDueDate(new Date());dispatch(selectTask({}));};// ** Function to reset fields\nconst handleResetFields=()=>{const descValue=EditorState.createWithContent(ContentState.createFromText(store.selectedTask.description));setValue('title',store.selectedTask.title);setDesc(descValue);setCompleted(store.selectedTask.isCompleted);setImportant(store.selectedTask.isImportant);setDeleted(store.selectedTask.isDeleted);setDueDate(store.selectedTask.dueDate);if(store.selectedTask.tags.length){const tags=[];store.selectedTask.tags.map(tag=>{tags.push({value:tag,label:capitalize(tag)});});setTags(tags);}};// ** Renders Footer Buttons\nconst renderFooterButtons=()=>{if(store&&!isObjEmpty(store.selectedTask)){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",className:\"update-btn update-todo-item me-1\",children:\"Update\"}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:handleResetFields,outline:true,children:\"Reset\"})]});}else{return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",className:\"add-todo-item me-1\",children:\"Add\"}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:handleTaskSidebar,outline:true,children:\"Cancel\"})]});}};const onSubmit=data=>{const newTaskTag=[];if(tags.length){tags.map(tag=>newTaskTag.push(tag.value));}const state={dueDate,title:data.title,tags:newTaskTag,description:desc,isCompleted:completed,isDeleted:deleted,isImportant:important};if(data.title.length){if(isObjEmpty(errors)){if(isObjEmpty(store.selectedTask)||!isObjEmpty(store.selectedTask)&&!store.selectedTask.title.length){dispatch(addTask(state));}else{dispatch(updateTask({...state,id:store.selectedTask.id}));}handleTaskSidebar();}}else{setError('title',{type:'manual'});}};return/*#__PURE__*/_jsx(Modal,{isOpen:open,toggle:handleTaskSidebar,className:\"sidebar-lg\",contentClassName:\"p-0\",onOpened:handleSidebarOpened,onClosed:handleSidebarClosed,modalClassName:\"modal-slide-in sidebar-todo-modal\",children:/*#__PURE__*/_jsxs(Form,{id:\"form-modal-todo\",className:\"todo-modal\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(ModalHeader,{store:store,deleted:deleted,dispatch:dispatch,important:important,deleteTask:deleteTask,setDeleted:setDeleted,setImportant:setImportant,handleTaskSidebar:handleTaskSidebar,children:handleSidebarTitle()}),/*#__PURE__*/_jsxs(ModalBody,{className:\"flex-grow-1 pb-sm-0 pb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsxs(Label,{className:\"form-label\",for:\"task-title\",children:[\"Title \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(Controller,{name:\"title\",control:control,render:_ref2=>{let{field}=_ref2;return/*#__PURE__*/_jsx(Input,{id:\"task-title\",placeholder:\"Title\",className:\"new-todo-item-title\",invalid:errors.title&&true,...field});}}),errors.title&&/*#__PURE__*/_jsx(FormFeedback,{children:\"Please enter a valid wish title\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(Label,{className:\"form-label\",for:\"task-tags\",children:\"Tags\"}),/*#__PURE__*/_jsx(Select,{isMulti:true,id:\"task-tags\",className:\"react-select\",classNamePrefix:\"select\",isClearable:false,options:tagOptions,theme:selectThemeColors,value:tags,onChange:data=>{setTags(data!==null?[...data]:[]);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(Label,{for:\"task-desc\",className:\"form-label\",children:\"Description\"}),/*#__PURE__*/_jsx(Editor,{editorState:desc,wrapperClassName:\"toolbar-bottom\",toolbar:{options:['inline','textAlign'],inline:{inDropdown:false,options:['bold','italic','underline']}},onEditorStateChange:data=>setDesc(data)})]}),/*#__PURE__*/_jsx(\"div\",{children:renderFooterButtons()})]})]})});};export default TaskSidebar;","map":{"version":3,"sources":["/Users/jvledesma/Downloads/bitfari-dev/www/src/views/apps/focus/TaskSidebar.js"],"names":["useState","Fragment","classnames","Flatpickr","Editor","X","Star","Trash","Select","components","useForm","Controller","EditorState","ContentState","Modal","ModalBody","Button","Form","Input","Label","FormFeedback","isObjEmpty","selectThemeColors","capitalize","string","charAt","toUpperCase","slice","ModalHeader","props","children","store","handleTaskSidebar","setDeleted","deleted","important","setImportant","deleteTask","dispatch","handleDeleteTask","selectedTask","id","TaskSidebar","open","updateTask","selectTask","addTask","tags","setTags","desc","setDesc","createEmpty","completed","setCompleted","dueDate","setDueDate","Date","control","setError","setValue","handleSubmit","formState","errors","defaultValues","title","tagOptions","value","label","AssigneeComponent","data","img","handleSidebarTitle","handleSidebarOpened","isCompleted","isImportant","description","createWithContent","createFromText","obj","_immutable","currentContent","blockMap","property","Object","keys","map","val","text","length","tag","push","handleSidebarClosed","handleResetFields","descValue","isDeleted","renderFooterButtons","onSubmit","newTaskTag","state","type","field","options","inline","inDropdown"],"mappings":"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","sourcesContent":["// ** React Imports\r\nimport { useState, Fragment } from 'react'\r\n\r\n// ** Third Party Components\r\nimport classnames from 'classnames'\r\nimport Flatpickr from 'react-flatpickr'\r\nimport { Editor } from 'react-draft-wysiwyg'\r\nimport { X, Star, Trash } from 'react-feather'\r\nimport Select, { components } from 'react-select'\r\nimport { useForm, Controller } from 'react-hook-form'\r\nimport { EditorState, ContentState } from 'draft-js'\r\n\r\n// ** Reactstrap Imports\r\nimport { Modal, ModalBody, Button, Form, Input, Label, FormFeedback } from 'reactstrap'\r\n\r\n// ** Utils\r\nimport { isObjEmpty, selectThemeColors } from '@utils'\r\n\r\n// ** Styles Imports\r\nimport '@styles/react/libs/editor/editor.scss'\r\nimport '@styles/react/libs/flatpickr/flatpickr.scss'\r\nimport '@styles/react/libs/react-select/_react-select.scss'\r\n\r\n// ** Function to capitalize the first letter of string\r\nconst capitalize = string => string.charAt(0).toUpperCase() + string.slice(1)\r\n\r\n// ** Modal Header\r\nconst ModalHeader = props => {\r\n  // ** Props\r\n  const { children, store, handleTaskSidebar, setDeleted, deleted, important, setImportant, deleteTask, dispatch } =\r\n    props\r\n\r\n  // ** Function to delete task\r\n  const handleDeleteTask = () => {\r\n    setDeleted(!deleted)\r\n    dispatch(deleteTask(store.selectedTask.id))\r\n    handleTaskSidebar()\r\n  }\r\n\r\n  return (\r\n    <div className='modal-header d-flex align-items-center justify-content-between mb-1'>\r\n      <h5 className='modal-title'>{children}</h5>\r\n      <div className='todo-item-action d-flex align-items-center'>\r\n        {store && !isObjEmpty(store.selectedTask) ? (\r\n          <Trash className='cursor-pointer mt-25' size={16} onClick={() => handleDeleteTask()} />\r\n        ) : null}\r\n        <span className='todo-item-favorite cursor-pointer mx-75'>\r\n          <Star\r\n            size={16}\r\n            onClick={() => setImportant(!important)}\r\n            className={classnames({\r\n              'text-warning': important === true\r\n            })}\r\n          />\r\n        </span>\r\n        <X className='fw-normal mt-25' size={16} onClick={handleTaskSidebar} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst TaskSidebar = props => {\r\n  // ** Props\r\n  const { open, handleTaskSidebar, store, dispatch, updateTask, selectTask, addTask, deleteTask } = props\r\n\r\n  // ** States\r\n  const [tags, setTags] = useState([])\r\n  const [desc, setDesc] = useState(EditorState.createEmpty())\r\n  const [completed, setCompleted] = useState(false)\r\n  const [important, setImportant] = useState(false)\r\n  const [deleted, setDeleted] = useState(false)\r\n  const [dueDate, setDueDate] = useState(new Date())\r\n\r\n  const {\r\n    control,\r\n    setError,\r\n    setValue,\r\n    handleSubmit,\r\n    formState: { errors }\r\n  } = useForm({\r\n    defaultValues: { title: '' }\r\n  })\r\n\r\n  // ** Tag Select Options\r\n  const tagOptions = [\r\n    { value: 'family', label: 'Family' },\r\n    { value: 'local', label: 'Local' },\r\n    { value: 'business', label: 'Business' },\r\n    { value: 'info', label: 'Information' },\r\n    { value: 'shopping', label: 'Shopping' }\r\n  ]\r\n\r\n  // ** Custom Assignee Component\r\n  const AssigneeComponent = ({ data, ...props }) => {\r\n    return (\r\n      <components.Option {...props}>\r\n        <div className='d-flex align-items-center'>\r\n          <img className='d-block rounded-circle me-50' src={data.img} height='26' width='26' alt={data.label} />\r\n          <p className='mb-0'>{data.label}</p>\r\n        </div>\r\n      </components.Option>\r\n    )\r\n  }\r\n\r\n  // ** Returns sidebar title\r\n  const handleSidebarTitle = () => {\r\n    if (store && !isObjEmpty(store.selectedTask)) {\r\n      return (\r\n        <Button\r\n          outline\r\n          size='sm'\r\n          onClick={() => setCompleted(!completed)}\r\n          color={completed === true ? 'success' : 'secondary'}\r\n        >\r\n          {completed === true ? 'Completed' : 'Mark Completed'}\r\n        </Button>\r\n      )\r\n    } else {\r\n      return 'Add Goal'\r\n    }\r\n  }\r\n\r\n  // ** Function to run when sidebar opens\r\n  const handleSidebarOpened = () => {\r\n    const { selectedTask } = store\r\n    if (!isObjEmpty(selectedTask)) {\r\n      setValue('title', selectedTask.title)\r\n      setCompleted(selectedTask.isCompleted)\r\n      setImportant(selectedTask.isImportant)\r\n      setDueDate(selectedTask.dueDate)\r\n      if (typeof selectedTask.description === 'string') {\r\n        setDesc(EditorState.createWithContent(ContentState.createFromText(selectedTask.description)))\r\n      } else {\r\n        const obj = selectedTask.description._immutable.currentContent.blockMap\r\n        const property = Object.keys(obj).map(val => val)\r\n\r\n        setDesc(EditorState.createWithContent(ContentState.createFromText(obj[property].text)))\r\n      }\r\n\r\n      if (selectedTask.tags.length) {\r\n        const tags = []\r\n        selectedTask.tags.map(tag => {\r\n          tags.push({ value: tag, label: capitalize(tag) })\r\n        })\r\n        setTags(tags)\r\n      }\r\n    }\r\n  }\r\n\r\n  // ** Function to run when sidebar closes\r\n  const handleSidebarClosed = () => {\r\n    setTags([])\r\n    setDesc('')\r\n    setValue('title', '')\r\n    setCompleted(false)\r\n    setImportant(false)\r\n    setDueDate(new Date())\r\n    dispatch(selectTask({}))\r\n  }\r\n\r\n  // ** Function to reset fields\r\n  const handleResetFields = () => {\r\n    const descValue = EditorState.createWithContent(ContentState.createFromText(store.selectedTask.description))\r\n\r\n    setValue('title', store.selectedTask.title)\r\n    setDesc(descValue)\r\n    setCompleted(store.selectedTask.isCompleted)\r\n    setImportant(store.selectedTask.isImportant)\r\n    setDeleted(store.selectedTask.isDeleted)\r\n    setDueDate(store.selectedTask.dueDate)\r\n\r\n    if (store.selectedTask.tags.length) {\r\n      const tags = []\r\n      store.selectedTask.tags.map(tag => {\r\n        tags.push({ value: tag, label: capitalize(tag) })\r\n      })\r\n      setTags(tags)\r\n    }\r\n  }\r\n\r\n  // ** Renders Footer Buttons\r\n  const renderFooterButtons = () => {\r\n    if (store && !isObjEmpty(store.selectedTask)) {\r\n      return (\r\n        <Fragment>\r\n          <Button color='primary' className='update-btn update-todo-item me-1'>\r\n            Update\r\n          </Button>\r\n          <Button color='secondary' onClick={handleResetFields} outline>\r\n            Reset\r\n          </Button>\r\n        </Fragment>\r\n      )\r\n    } else {\r\n      return (\r\n        <Fragment>\r\n          <Button color='primary' className='add-todo-item me-1'>\r\n            Add\r\n          </Button>\r\n          <Button color='secondary' onClick={handleTaskSidebar} outline>\r\n            Cancel\r\n          </Button>\r\n        </Fragment>\r\n      )\r\n    }\r\n  }\r\n\r\n  const onSubmit = data => {\r\n    const newTaskTag = []\r\n\r\n    if (tags.length) {\r\n      tags.map(tag => newTaskTag.push(tag.value))\r\n    }\r\n\r\n    const state = {\r\n      dueDate,\r\n      title: data.title,\r\n      tags: newTaskTag,\r\n      description: desc,\r\n      isCompleted: completed,\r\n      isDeleted: deleted,\r\n      isImportant: important\r\n    }\r\n\r\n    if (data.title.length) {\r\n      if (isObjEmpty(errors)) {\r\n        if (isObjEmpty(store.selectedTask) || (!isObjEmpty(store.selectedTask) && !store.selectedTask.title.length)) {\r\n          dispatch(addTask(state))\r\n        } else {\r\n          dispatch(updateTask({ ...state, id: store.selectedTask.id }))\r\n        }\r\n        handleTaskSidebar()\r\n      }\r\n    } else {\r\n      setError('title', {\r\n        type: 'manual'\r\n      })\r\n    }\r\n  }\r\n  return (\r\n    <Modal\r\n      isOpen={open}\r\n      toggle={handleTaskSidebar}\r\n      className='sidebar-lg'\r\n      contentClassName='p-0'\r\n      onOpened={handleSidebarOpened}\r\n      onClosed={handleSidebarClosed}\r\n      modalClassName='modal-slide-in sidebar-todo-modal'\r\n    >\r\n      <Form id='form-modal-todo' className='todo-modal' onSubmit={handleSubmit(onSubmit)}>\r\n        <ModalHeader\r\n          store={store}\r\n          deleted={deleted}\r\n          dispatch={dispatch}\r\n          important={important}\r\n          deleteTask={deleteTask}\r\n          setDeleted={setDeleted}\r\n          setImportant={setImportant}\r\n          handleTaskSidebar={handleTaskSidebar}\r\n        >\r\n          {handleSidebarTitle()}\r\n        </ModalHeader>\r\n        <ModalBody className='flex-grow-1 pb-sm-0 pb-3'>\r\n          <div className='mb-1'>\r\n            <Label className='form-label' for='task-title'>\r\n              Title <span className='text-danger'>*</span>\r\n            </Label>\r\n            <Controller\r\n              name='title'\r\n              control={control}\r\n              render={({ field }) => (\r\n                <Input\r\n                  id='task-title'\r\n                  placeholder='Title'\r\n                  className='new-todo-item-title'\r\n                  invalid={errors.title && true}\r\n                  {...field}\r\n                />\r\n              )}\r\n            />\r\n            {errors.title && <FormFeedback>Please enter a valid wish title</FormFeedback>}\r\n          </div>\r\n          \r\n          <div className='mb-1'>\r\n            <Label className='form-label' for='task-tags'>\r\n              Tags\r\n            </Label>\r\n            <Select\r\n              isMulti\r\n              id='task-tags'\r\n              className='react-select'\r\n              classNamePrefix='select'\r\n              isClearable={false}\r\n              options={tagOptions}\r\n              theme={selectThemeColors}\r\n              value={tags}\r\n              onChange={data => {\r\n                setTags(data !== null ? [...data] : [])\r\n              }}\r\n            />\r\n          </div>\r\n          <div className='mb-1'>\r\n            <Label for='task-desc' className='form-label'>\r\n              Description\r\n            </Label>\r\n            <Editor\r\n              editorState={desc}\r\n              wrapperClassName='toolbar-bottom'\r\n              toolbar={{\r\n                options: ['inline', 'textAlign'],\r\n                inline: {\r\n                  inDropdown: false,\r\n                  options: ['bold', 'italic', 'underline']\r\n                }\r\n              }}\r\n              onEditorStateChange={data => setDesc(data)}\r\n            />\r\n          </div>\r\n          <div>{renderFooterButtons()}</div>\r\n        </ModalBody>\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default TaskSidebar"]},"metadata":{},"sourceType":"module"}